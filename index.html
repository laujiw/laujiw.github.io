<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯—è¯é›…è¶£ - Poetry Card Game</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap');

        :root {
            --color-paper: #fdfbf7;
            --color-ink: #2b2b2b;
            --color-cinnabar: #cb3a56;
            --color-bamboo: #789262;
            --color-indigo: #1661ab;
            --color-gold: #b5853f;
            --color-wash: #e6e6e6;
        }

        body {
            font-family: 'Noto Serif SC', serif;
            background-color: var(--color-paper);
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise' x='0' y='0'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            color: var(--color-ink);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Card Flip Animation */
        .perspective {
            perspective: 1000px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
            transform-style: preserve-3d;
        }
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease;
        }
        
        .card:hover .card-front {
             box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .card-front {
            background-color: #fff;
            border: 2px solid var(--color-gold);
            color: var(--color-ink);
        }
        .card-back {
            transform: rotateY(180deg);
            padding: 0.5rem;
            flex-direction: column;
        }

        /* Ink Pulse Effect for Traps */
        @keyframes inkPulse {
            0% { transform: scale(0.9); opacity: 0.8; box-shadow: 0 0 0 0 rgba(43, 43, 43, 0.7); }
            50% { transform: scale(1.02); opacity: 1; }
            100% { transform: scale(1); opacity: 1; box-shadow: 0 0 0 20px rgba(43, 43, 43, 0); }
        }
        
        .ink-reveal {
            animation: inkPulse 0.8s ease-out forwards;
        }

        /* Custom Colors & Utilities */
        .bg-paper { background-color: var(--color-paper); }
        .text-cinnabar { color: var(--color-cinnabar); }

        /* Rank Badge Styles */
        .rank-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            color: white;
        }
        .rank-1 { background-color: #a0aec0; } /* TongSheng */
        .rank-2 { background-color: #789262; } /* XiuCai */
        .rank-3 { background-color: #1661ab; } /* JuRen */
        .rank-4 { background-color: #b5853f; } /* GongShi */
        .rank-5 { background-color: #cb3a56; } /* JinShi */
        .rank-6 { background: linear-gradient(45deg, #b5853f, #cb3a56); } /* HanLin */

        /* Stamp Animation */
        @keyframes stamp-in {
            0% { transform: scale(3) rotate(20deg); opacity: 0; }
            80% { transform: scale(0.9) rotate(-2deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        .stamp-seal {
            width: 100px;
            height: 100px;
            border: 4px solid #cb3a56;
            border-radius: 8px;
            color: #cb3a56;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            font-family: serif;
            transform: rotate(-5deg);
            opacity: 0.8;
            mask-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.5'/%3E%3C/svg%3E");
            animation: stamp-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        .bg-cinnabar { background-color: var(--color-cinnabar); }
        .text-bamboo { color: var(--color-bamboo); }
        .bg-bamboo { background-color: var(--color-bamboo); }
        .text-indigo { color: var(--color-indigo); }
        .bg-indigo { background-color: var(--color-indigo); }
        
        .chinese-border {
            border: 2px solid var(--color-ink);
            position: relative;
        }
        .chinese-border::after {
            content: '';
            position: absolute;
            top: 4px; left: 4px; right: 4px; bottom: 4px;
            border: 1px solid var(--color-ink);
            pointer-events: none;
        }

        .ink-cursor {
            cursor: pointer;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--color-paper); 
        }
        ::-webkit-scrollbar-thumb {
            background: var(--color-gold); 
            border-radius: 4px;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center relative overflow-x-hidden" onclick="AudioSys.init(); AudioSys.startInkAmbient()">

    <!-- Dynamic Ink Background -->
    <canvas id="inkCanvas" class="fixed inset-0 w-full h-full pointer-events-none z-0 opacity-40"></canvas>

    <!-- Header -->
    <header class="w-full py-8 text-center mb-2 z-10 relative">
        <div class="absolute top-4 right-4 flex gap-2">
            <button onclick="AudioSys.toggleBGM()" id="bgmBtn" class="p-2 rounded-full border border-gray-300 hover:bg-gray-100 text-xs text-gray-500 transition">
                ğŸµ é›…ä¹: å…³
            </button>
            <div id="userRank" class="px-3 py-2 rounded-full border border-gold bg-paper shadow-sm text-xs font-bold text-gold flex items-center gap-2 cursor-pointer" onclick="UserSys.showProfile()">
                <span>ğŸ“ ç«¥ç”Ÿ</span>
            </div>
        </div>

        <h1 class="text-5xl font-bold tracking-[0.2em] text-cinnabar mb-3" style="text-shadow: 1px 1px 0px rgba(0,0,0,0.1); font-family: 'Noto Serif SC', serif;">è¯—è¯é›…è¶£</h1>
        <div class="flex items-center justify-center gap-3">
            <span class="block w-8 h-[1px] bg-gold"></span>
            <p class="text-sm text-gray-500 tracking-widest font-serif">å“å‘³å¤éŸµ Â· å¯“æ•™äºä¹</p>
            <span class="block w-8 h-[1px] bg-gold"></span>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="app" class="flex-1 w-full max-w-6xl px-4 pb-10 flex flex-col items-center relative">
        <!-- Content injected by JS -->
    </main>

    <!-- Modal Overlay -->
    <div id="modal" class="fixed inset-0 bg-black/20 hidden items-center justify-center z-50 backdrop-blur-md transition-all duration-300">
        <div class="bg-paper p-8 rounded-lg shadow-2xl max-w-2xl w-full relative chinese-border m-4 max-h-[90vh] overflow-y-auto transform transition-all scale-100">
            <button id="closeModal" class="absolute top-4 right-4 text-2xl text-gray-400 hover:text-cinnabar transition">&times;</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // --- Web Audio API System ---
        const AudioSys = {
            ctx: null,
            bgmNode: null,
            bgmInterval: null,
            isBGMPlaying: false,
            init: function() {
                if (!this.ctx) {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    if (AudioContext) {
                        this.ctx = new AudioContext();
                        this.startInkAmbient();
                    }
                } else if (this.ctx.state === 'suspended') {
                    this.ctx.resume();
                }
            },
            toggleBGM: function() {
                this.init();
                const btn = document.getElementById('bgmBtn');
                if (this.isBGMPlaying) {
                    this.stopBGM();
                    btn.innerText = "ğŸµ é›…ä¹: å…³";
                    btn.classList.remove('text-indigo-600', 'border-indigo-600');
                    btn.classList.add('text-gray-500');
                } else {
                    this.startBGM();
                    btn.innerText = "ğŸµ é›…ä¹: å¼€";
                    btn.classList.add('text-indigo-600', 'border-indigo-600');
                    btn.classList.remove('text-gray-500');
                }
            },
            startBGM: function() {
                if (!this.ctx) return;
                this.isBGMPlaying = true;
                // Pentatonic Scale (Gong, Shang, Jue, Zhi, Yu)
                // C4, D4, E4, G4, A4
                const scale = [261.63, 293.66, 329.63, 392.00, 440.00, 523.25]; 
                
                this.bgmInterval = setInterval(() => {
                    if (!this.isBGMPlaying) return;
                    // Play a random note occasionally to simulate Guqin
                    if (Math.random() > 0.6) {
                        const freq = scale[Math.floor(Math.random() * scale.length)];
                        this.playTone(freq, 2, 'triangle', 0.1);
                    }
                }, 1500);
            },
            stopBGM: function() {
                this.isBGMPlaying = false;
                if (this.bgmInterval) clearInterval(this.bgmInterval);
            },
            playTone: function(freq, duration, type = 'sine', vol = 0.5) {
                if (!this.ctx) return;
                try {
                    const t = this.ctx.currentTime;
                    const osc = this.ctx.createOscillator();
                    const gain = this.ctx.createGain();
                    
                    osc.type = type;
                    osc.frequency.setValueAtTime(freq, t);
                    
                    gain.gain.setValueAtTime(0, t);
                    gain.gain.linearRampToValueAtTime(vol, t + 0.1);
                    gain.gain.exponentialRampToValueAtTime(0.001, t + duration);

                    // Add Reverb-like effect via simple filter
                    const filter = this.ctx.createBiquadFilter();
                    filter.type = 'lowpass';
                    filter.frequency.value = 800;

                    osc.connect(filter);
                    filter.connect(gain);
                    gain.connect(this.ctx.destination);
                    
                    osc.start();
                    osc.stop(t + duration);
                } catch(e){}
            },
            playFlip: function() {
                if (!this.ctx) return;
                try {
                    const t = this.ctx.currentTime;
                    const bufferSize = this.ctx.sampleRate * 0.15;
                    const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);
                    const data = buffer.getChannelData(0);
                    for (let i = 0; i < bufferSize; i++) {
                        data[i] = Math.random() * 2 - 1;
                    }
                    const noise = this.ctx.createBufferSource();
                    noise.buffer = buffer;
                    const filter = this.ctx.createBiquadFilter();
                    filter.type = 'lowpass';
                    filter.frequency.setValueAtTime(1200, t);
                    filter.frequency.exponentialRampToValueAtTime(300, t + 0.15);
                    const gain = this.ctx.createGain();
                    gain.gain.setValueAtTime(0.3, t);
                    gain.gain.exponentialRampToValueAtTime(0.01, t + 0.15);
                    noise.connect(filter);
                    filter.connect(gain);
                    gain.connect(this.ctx.destination);
                    noise.start();
                } catch(e) { console.error(e); }
            },
            playInk: function() {
                if (!this.ctx) return;
                try {
                    const t = this.ctx.currentTime;
                    const osc = this.ctx.createOscillator();
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(600, t);
                    osc.frequency.exponentialRampToValueAtTime(100, t + 0.4);
                    const gain = this.ctx.createGain();
                    gain.gain.setValueAtTime(0, t);
                    gain.gain.linearRampToValueAtTime(0.5, t + 0.05);
                    gain.gain.exponentialRampToValueAtTime(0.01, t + 0.4);
                    osc.connect(gain);
                    gain.connect(this.ctx.destination);
                    osc.start();
                    osc.stop(t + 0.5);
                } catch(e) { console.error(e); }
            },
            playWin: function() {
                if (!this.ctx) return;
                try {
                    const t = this.ctx.currentTime;
                    [0, 0.1, 0.2].forEach((delay, i) => {
                        this.playTone(440 + (i*110), 0.6, 'triangle', 0.2);
                    });
                } catch(e) {}
            },
            startInkAmbient: function() {
                // Subtle ambient setup if needed
            }
        };

        // --- Visual System (Ink Background) ---
        const VisualSys = {
            canvas: null,
            ctx: null,
            particles: [],
            width: 0,
            height: 0,
            init: function() {
                this.canvas = document.getElementById('inkCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.resize();
                window.addEventListener('resize', () => this.resize());
                
                // Track mouse
                document.addEventListener('mousemove', (e) => {
                    if (Math.random() > 0.8) {
                        this.addParticle(e.clientX, e.clientY);
                    }
                });

                this.animate();
            },
            resize: function() {
                this.width = window.innerWidth;
                this.height = window.innerHeight;
                this.canvas.width = this.width;
                this.canvas.height = this.height;
            },
            addParticle: function(x, y) {
                this.particles.push({
                    x: x,
                    y: y,
                    radius: Math.random() * 10 + 5,
                    alpha: 0.5,
                    growth: Math.random() * 0.5 + 0.1
                });
            },
            animate: function() {
                this.ctx.clearRect(0, 0, this.width, this.height);
                
                for (let i = 0; i < this.particles.length; i++) {
                    const p = this.particles[i];
                    p.radius += p.growth;
                    p.alpha -= 0.005;
                    
                    this.ctx.beginPath();
                    this.ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    this.ctx.fillStyle = `rgba(43, 43, 43, ${p.alpha})`; // Ink color
                    this.ctx.fill();
                    
                    if (p.alpha <= 0) {
                        this.particles.splice(i, 1);
                        i--;
                    }
                }
                requestAnimationFrame(() => this.animate());
            }
        };

        // --- User System (Ranks & Gamification) ---
        const UserSys = {
            data: {
                xp: 0,
                rankIndex: 0,
                stamps: [] // Collection of stamps
            },
            ranks: [
                { name: "ç«¥ç”Ÿ", minXp: 0 },
                { name: "ç§€æ‰", minXp: 100 },
                { name: "ä¸¾äºº", minXp: 300 },
                { name: "è´¡å£«", minXp: 600 },
                { name: "è¿›å£«", minXp: 1000 },
                { name: "ç¿°æ—", minXp: 2000 }
            ],
            init: function() {
                const saved = localStorage.getItem('shici_user');
                if (saved) {
                    this.data = JSON.parse(saved);
                }
                this.updateUI();
            },
            addXP: function(amount) {
                this.data.xp += amount;
                this.checkRankUp();
                this.save();
                this.updateUI();
            },
            addStamp: function(name) {
                if (!this.data.stamps.includes(name)) {
                    this.data.stamps.push(name);
                    this.save();
                }
            },
            checkRankUp: function() {
                let newIndex = 0;
                this.ranks.forEach((r, i) => {
                    if (this.data.xp >= r.minXp) newIndex = i;
                });
                if (newIndex > this.data.rankIndex) {
                    this.data.rankIndex = newIndex;
                    alert(`ğŸ‰ æ­å–œï¼æ‚¨å·²æ™‹å‡ä¸ºã€${this.ranks[newIndex].name}ã€‘`);
                }
            },
            save: function() {
                localStorage.setItem('shici_user', JSON.stringify(this.data));
            },
            updateUI: function() {
                const el = document.getElementById('userRank');
                if(el) {
                    const r = this.ranks[this.data.rankIndex];
                    el.innerHTML = `<span>ğŸ“ ${r.name}</span> <span class="text-[10px] opacity-60">(${this.data.xp})</span>`;
                }
            },
            showProfile: function() {
                const r = this.ranks[this.data.rankIndex];
                const nextR = this.ranks[this.data.rankIndex + 1];
                let progress = 100;
                if (nextR) {
                    progress = ((this.data.xp - r.minXp) / (nextR.minXp - r.minXp)) * 100;
                }

                showModal(`
                    <div class="text-center">
                        <h2 class="text-2xl font-bold mb-4 text-cinnabar">æˆ‘çš„é›…é›†</h2>
                        <div class="mb-6 p-4 bg-paper border chinese-border rounded">
                            <div class="text-3xl font-bold text-ink mb-1">${r.name}</div>
                            <div class="text-xs text-gray-500 mb-2">å½“å‰æ–‡ä½</div>
                            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1">
                                <div class="h-full bg-gold" style="width: ${progress}%"></div>
                            </div>
                            <div class="text-xs text-right text-gray-400">${this.data.xp} / ${nextR ? nextR.minXp : 'MAX'}</div>
                        </div>

                        <h3 class="text-lg font-bold mb-3 text-left border-b pb-1">æˆå°±å°ç« </h3>
                        <div class="grid grid-cols-3 gap-2 max-h-40 overflow-y-auto">
                            ${this.data.stamps.length > 0 ? this.data.stamps.map(s => `
                                <div class="aspect-square border border-red-200 bg-red-50 rounded flex items-center justify-center p-2">
                                    <div class="border-2 border-red-400 w-full h-full rounded flex items-center justify-center text-red-500 font-serif font-bold text-xs transform rotate-[-5deg]">
                                        ${s}
                                    </div>
                                </div>
                            `).join('') : '<div class="col-span-3 text-sm text-gray-400 py-4">æš‚æ— å°ç« ï¼Œè¯·å¤šå‚ä¸å¯¹å¼ˆã€‚</div>'}
                        </div>
                        
                        <div class="mt-6">
                             <button onclick="closeModal()" class="px-6 py-2 bg-gray-800 text-white rounded">å…³é—­</button>
                        </div>
                    </div>
                `);
            }
        };

        // --- Data: Poetry & Imagery ---
        // Mode 1 & 2 Database
        const mainDatabase = [
          { image: "é¹…", verse: "é¹…ï¼Œé¹…ï¼Œé¹…ï¼Œæ›²é¡¹å‘å¤©æ­Œã€‚", source: "éª†å®¾ç‹ã€Šå’é¹…ã€‹" },
          { image: "æ˜¥", verse: "æ˜¥çœ ä¸è§‰æ™“ï¼Œå¤„å¤„é—»å•¼é¸Ÿã€‚", source: "å­Ÿæµ©ç„¶ã€Šæ˜¥æ™“ã€‹" },
          { image: "æœˆ", verse: "åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚", source: "æç™½ã€Šé™å¤œæ€ã€‹" },
          { image: "æœˆ", verse: "ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚", source: "æç™½ã€Šé™å¤œæ€ã€‹" },
          { image: "é£", verse: "è§£è½ä¸‰ç§‹å¶ï¼Œèƒ½å¼€äºŒæœˆèŠ±ã€‚", source: "æå³¤ã€Šé£ã€‹" },
          { image: "è²", verse: "æ±Ÿå—å¯é‡‡è²ï¼Œè²å¶ä½•ç”°ç”°ã€‚", source: "æ±‰ä¹åºœã€Šæ±Ÿå—ã€‹" },
          { image: "æŸ³", verse: "ç¢§ç‰å¦†æˆä¸€æ ‘é«˜ï¼Œä¸‡æ¡å‚ä¸‹ç»¿ä¸ç»¦ã€‚", source: "è´ºçŸ¥ç« ã€Šå’æŸ³ã€‹" },
          { image: "æœéœ²", verse: "é’é’å›­ä¸­è‘µï¼Œæœéœ²å¾…æ—¥æ™", source: "æ±‰ä¹åºœã€Šé•¿æ­Œè¡Œã€‹" },
          { image: "æ—¶å…‰", verse: "å°‘å£®ä¸åŠªåŠ›ï¼Œè€å¤§å¾’ä¼¤æ‚²ã€‚", source: "æ±‰ä¹åºœã€Šé•¿æ­Œè¡Œã€‹" },
          { image: "ç™½æ—¥", verse: "ç™½æ—¥ä¾å±±å°½ï¼Œé»„æ²³å…¥æµ·æµ", source: "ç‹ä¹‹æ¶£ã€Šç™»é¹³é›€æ¥¼ã€‹" },
          { image: "é»„æ²³", verse: "ç™½æ—¥ä¾å±±å°½ï¼Œé»„æ²³å…¥æµ·æµ", source: "ç‹ä¹‹æ¶£ã€Šç™»é¹³é›€æ¥¼ã€‹" },
          { image: "ç™»æ¥¼", verse: "æ¬²ç©·åƒé‡Œç›®ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼ã€‚", source: "ç‹ä¹‹æ¶£ã€Šç™»é¹³é›€æ¥¼ã€‹" },
          { image: "å¤œå…‰æ¯", verse: "è‘¡è„ç¾é…’å¤œå…‰æ¯ï¼Œæ¬²é¥®çµç¶é©¬ä¸Šå‚¬ã€‚", source: "ç‹ç¿°ã€Šå‡‰å·è¯ã€‹" },
          { image: "æ²™åœº", verse: "é†‰å§æ²™åœºå›è«ç¬‘ï¼Œå¤æ¥å¾æˆ˜å‡ äººå›ï¼Ÿ", source: "ç‹ç¿°ã€Šå‡‰å·è¯ã€‹" },
          { image: "è¾¹å…³", verse: "ç§¦æ—¶æ˜æœˆæ±‰æ—¶å…³ï¼Œä¸‡é‡Œé•¿å¾äººæœªè¿˜ã€‚", source: "ç‹æ˜Œé¾„ã€Šå‡ºå¡ã€‹" },
          { image: "é©¬", verse: "ä½†ä½¿é¾™åŸé£å°†åœ¨ï¼Œä¸æ•™èƒ¡é©¬åº¦é˜´å±±ã€‚", source: "ç‹æ˜Œé¾„ã€Šå‡ºå¡ã€‹" },
          { image: "å†°å¿ƒ", verse: "æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚", source: "ç‹æ˜Œé¾„ã€ŠèŠ™è“‰æ¥¼é€è¾›æ¸ã€‹" },
          { image: "è‰", verse: "å¤©è‹è‹ï¼Œé‡èŒ«èŒ«ï¼Œé£å¹è‰ä½è§ç‰›ç¾Šã€‚", source: "åŒ—æœæ°‘æ­Œã€Šæ••å‹’æ­Œã€‹" },
          { image: "ä¹¡éŸ³", verse: "å°‘å°ç¦»å®¶è€å¤§å›ï¼Œä¹¡éŸ³æ— æ”¹é¬“æ¯›è¡°ã€‚", source: "è´ºçŸ¥ç« ã€Šå›ä¹¡å¶ä¹¦ã€‹" },
          { image: "å„¿ç«¥", verse: "å„¿ç«¥ç›¸è§ä¸ç›¸è¯†ï¼Œç¬‘é—®å®¢ä»ä½•å¤„æ¥", source: "è´ºçŸ¥ç« ã€Šå›ä¹¡å¶ä¹¦ã€‹" },
          { image: "é»„æ²³", verse: "é»„æ²³è¿œä¸Šç™½äº‘é—´ï¼Œä¸€ç‰‡å­¤åŸä¸‡ä»å±±ã€‚", source: "ç‹ä¹‹æ¶£ã€Šå‡‰å·è¯ã€‹" },
          { image: "å­¤åŸ", verse: "é»„æ²³è¿œä¸Šç™½äº‘é—´ï¼Œä¸€ç‰‡å­¤åŸä¸‡ä»å±±ã€‚", source: "ç‹ä¹‹æ¶£ã€Šå‡‰å·è¯ã€‹" },
          { image: "ç¾Œç¬›", verse: "ç¾Œç¬›ä½•é¡»æ€¨æ¨æŸ³ï¼Œæ˜¥é£ä¸åº¦ç‰é—¨å…³ã€‚", source: "ç‹ä¹‹æ¶£ã€Šå‡‰å·è¯ã€‹" },
          { image: "æ˜¥é£", verse: "ç¾Œç¬›ä½•é¡»æ€¨æ¨æŸ³ï¼Œæ˜¥é£ä¸åº¦ç‰é—¨å…³ã€‚", source: "ç‹ä¹‹æ¶£ã€Šå‡‰å·è¯ã€‹" },
          { image: "ç‰é—¨å…³", verse: "ç¾Œç¬›ä½•é¡»æ€¨æ¨æŸ³ï¼Œæ˜¥é£ä¸åº¦ç‰é—¨å…³ã€‚", source: "ç‹ä¹‹æ¶£ã€Šå‡‰å·è¯ã€‹" },
          { image: "ç©ºå±±", verse: "ç©ºå±±ä¸è§äººï¼Œä½†é—»äººè¯­å“ã€‚", source: "ç‹ç»´ã€Šé¹¿æŸ´ã€‹" },
          { image: "é’è‹”", verse: "è¿”æ™¯å…¥æ·±æ—ï¼Œå¤ç…§é’è‹”ä¸Šã€‚", source: "ç‹ç»´ã€Šé¹¿æŸ´ã€‹" },
          { image: "ç²Ÿ", verse: "æ˜¥ç§ä¸€ç²’ç²Ÿï¼Œç§‹æ”¶ä¸‡é¢—å­ã€‚", source: "æç»…ã€Šæ‚¯å†œã€‹å…¶ä¸€" },
          { image: "å†œå¤«", verse: "å››æµ·æ— é—²ç”°ï¼Œå†œå¤«çŠ¹é¥¿æ­»", source: "æç»…ã€Šæ‚¯å†œã€‹å…¶ä¸€" },
          { image: "æ±—", verse: "é”„ç¦¾æ—¥å½“åˆï¼Œæ±—æ»´ç¦¾ä¸‹åœŸã€‚", source: "æç»…ã€Šæ‚¯å†œã€‹å…¶äºŒ" },
          { image: "é¤", verse: "è°çŸ¥ç›˜ä¸­é¤ï¼Œç²’ç²’çš†è¾›è‹¦", source: "æç»…ã€Šæ‚¯å†œã€‹å…¶äºŒ" },
          { image: "æ¸­åŸé©¿", verse: "æ¸­åŸæœé›¨æµ¥è½»å°˜ï¼Œå®¢èˆé’é’æŸ³è‰²æ–°", source: "ç‹ç»´ã€Šé€å…ƒäºŒä½¿å®‰è¥¿ã€‹" },
          { image: "é˜³å…³", verse: "åŠå›æ›´å°½ä¸€æ¯é…’ï¼Œè¥¿å‡ºé˜³å…³æ— æ•…äººã€‚", source: "ç‹ç»´ã€Šé€å…ƒäºŒä½¿å®‰è¥¿ã€‹" },
          { image: "é…’", verse: "åŠå›æ›´å°½ä¸€æ¯é…’ï¼Œè¥¿å‡ºé˜³å…³æ— æ•…äººã€‚", source: "ç‹ç»´ã€Šé€å…ƒäºŒä½¿å®‰è¥¿ã€‹" },
          { image: "æ•…äºº", verse: "åŠå›æ›´å°½ä¸€æ¯é…’ï¼Œè¥¿å‡ºé˜³å…³æ— æ•…äººã€‚", source: "ç‹ç»´ã€Šé€å…ƒäºŒä½¿å®‰è¥¿ã€‹" },
          { image: "é€åˆ«", verse: "åŠå›æ›´å°½ä¸€æ¯é…’ï¼Œè¥¿å‡ºé˜³å…³æ— æ•…äººã€‚", source: "ç‹ç»´ã€Šé€å…ƒäºŒä½¿å®‰è¥¿ã€‹" },
          { image: "ä½³èŠ‚", verse: "ç‹¬åœ¨å¼‚ä¹¡ä¸ºå¼‚å®¢ï¼Œæ¯é€¢ä½³èŠ‚å€æ€äº²ã€‚", source: "ç‹ç»´ã€Šä¹æœˆä¹æ—¥å¿†å±±ä¸œå…„å¼Ÿã€‹" },
          { image: "ç™»é«˜", verse: "é¥çŸ¥å…„å¼Ÿç™»é«˜å¤„ï¼Œéæ’èŒ±è¸å°‘ä¸€äººã€‚", source: "ç‹ç»´ã€Šä¹æœˆä¹æ—¥å¿†å±±ä¸œå…„å¼Ÿã€‹" },
          { image: "èŒ±è¸", verse: "é¥çŸ¥å…„å¼Ÿç™»é«˜å¤„ï¼Œéæ’èŒ±è¸å°‘ä¸€äººã€‚", source: "ç‹ç»´ã€Šä¹æœˆä¹æ—¥å¿†å±±ä¸œå…„å¼Ÿã€‹" },
          { image: "æœˆ", verse: "å°æ—¶ä¸è¯†æœˆï¼Œå‘¼ä½œç™½ç‰ç›˜ã€‚", source: "æç™½ã€Šå¤æœ—æœˆè¡Œã€‹" },
          { image: "ç´«çƒŸ", verse: "æ—¥ç…§é¦™ç‚‰ç”Ÿç´«çƒŸï¼Œé¥çœ‹ç€‘å¸ƒæŒ‚å‰å·ã€‚", source: "æç™½ã€Šæœ›åºå±±ç€‘å¸ƒã€‹" },
          { image: "ç€‘å¸ƒ", verse: "æ—¥ç…§é¦™ç‚‰ç”Ÿç´«çƒŸï¼Œé¥çœ‹ç€‘å¸ƒæŒ‚å‰å·ã€‚", source: "æç™½ã€Šæœ›åºå±±ç€‘å¸ƒã€‹" },
          { image: "é“¶æ²³", verse: "é£æµç›´ä¸‹ä¸‰åƒå°ºï¼Œç–‘æ˜¯é“¶æ²³è½ä¹å¤©ã€‚", source: "æç™½ã€Šæœ›åºå±±ç€‘å¸ƒã€‹" },
          { image: "é£æµ", verse: "é£æµç›´ä¸‹ä¸‰åƒå°ºï¼Œç–‘æ˜¯é“¶æ²³è½ä¹å¤©ã€‚", source: "æç™½ã€Šæœ›åºå±±ç€‘å¸ƒã€‹" },
          { image: "å‹æƒ…", verse: "æ¡ƒèŠ±æ½­æ°´æ·±åƒå°ºï¼Œä¸åŠæ±ªä¼¦é€æˆ‘æƒ…ã€‚", source: "æç™½ã€Šèµ æ±ªä¼¦ã€‹" },
          { image: "æ˜¥é›¨", verse: "éšé£æ½œå…¥å¤œï¼Œæ¶¦ç‰©ç»†æ— å£°ã€‚", source: "æœç”«ã€Šæ˜¥å¤œå–œé›¨ã€‹" },
          { image: "é”¦å®˜åŸ", verse: "æ™“çœ‹çº¢æ¹¿å¤„ï¼ŒèŠ±é‡é”¦å®˜åŸã€‚", source: "æœç”«ã€Šæ˜¥å¤œå–œé›¨ã€‹" },
          { image: "æ˜¥é£", verse: "è¿Ÿæ—¥æ±Ÿå±±ä¸½ï¼Œæ˜¥é£èŠ±è‰é¦™ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "ç‡•å­", verse: "æ³¥èé£ç‡•å­ï¼Œæ²™æš–ç¡é¸³é¸¯ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "é¸³é¸¯", verse: "æ³¥èé£ç‡•å­ï¼Œæ²™æš–ç¡é¸³é¸¯ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "å­¤å¸†", verse: "å­¤å¸†è¿œå½±ç¢§ç©ºå°½ï¼Œå”¯è§é•¿æ±Ÿå¤©é™…æµã€‚", source: "æç™½ã€Šé»„é¹¤æ¥¼é€å­Ÿæµ©ç„¶ä¹‹å¹¿é™µã€‹" },
          { image: "é•¿æ±Ÿ", verse: "å­¤å¸†è¿œå½±ç¢§ç©ºå°½ï¼Œå”¯è§é•¿æ±Ÿå¤©é™…æµã€‚", source: "æç™½ã€Šé»„é¹¤æ¥¼é€å­Ÿæµ©ç„¶ä¹‹å¹¿é™µã€‹" },
          { image: "è½»èˆŸ", verse: "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½ï¼Œè½»èˆŸå·²è¿‡ä¸‡é‡å±±ã€‚", source: "æç™½ã€Šæ—©å‘ç™½å¸åŸã€‹" },
          { image: "çŒ¿å£°", verse: "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½ï¼Œè½»èˆŸå·²è¿‡ä¸‡é‡å±±ã€‚", source: "æç™½ã€Šæ—©å‘ç™½å¸åŸã€‹" },
          { image: "ç™½å¸åŸ", verse: "æœè¾ç™½å¸å½©äº‘é—´ï¼Œåƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜ã€‚", source: "æç™½ã€Šæ—©å‘ç™½å¸åŸã€‹" },
          { image: "å­¤å¸†", verse: "ä¸¤å²¸é’å±±ç›¸å¯¹å‡ºï¼Œå­¤å¸†ä¸€ç‰‡æ—¥è¾¹æ¥ã€‚", source: "æç™½ã€Šæœ›å¤©é—¨å±±ã€‹" },
          { image: "é’å±±", verse: "ä¸¤å²¸é’å±±ç›¸å¯¹å‡ºï¼Œå­¤å¸†ä¸€ç‰‡æ—¥è¾¹æ¥ã€‚", source: "æç™½ã€Šæœ›å¤©é—¨å±±ã€‹" },
          { image: "å¤©é—¨å±±", verse: "å¤©é—¨ä¸­æ–­æ¥šæ±Ÿå¼€ï¼Œç¢§æ°´ä¸œæµè‡³æ­¤å›ã€‚", source: "æç™½ã€Šæœ›å¤©é—¨å±±ã€‹" },
          { image: "çŸ¥å·±", verse: "è«æ„å‰è·¯æ— çŸ¥å·±ï¼Œå¤©ä¸‹è°äººä¸è¯†å›ï¼Ÿ", source: "é«˜é€‚ã€Šåˆ«è‘£å¤§ã€‹" },
          { image: "ç™½æ—¥", verse: "åƒé‡Œé»„äº‘ç™½æ—¥æ››ï¼ŒåŒ—é£å¹é›é›ªçº·çº·ã€‚", source: "é«˜é€‚ã€Šåˆ«è‘£å¤§ã€‹" },  
          { image: "åŒ—é£", verse: "åƒé‡Œé»„äº‘ç™½æ—¥æ››ï¼ŒåŒ—é£å¹é›é›ªçº·çº·ã€‚", source: "é«˜é€‚ã€Šåˆ«è‘£å¤§ã€‹" },   
          { image: "é›", verse: "åƒé‡Œé»„äº‘ç™½æ—¥æ››ï¼ŒåŒ—é£å¹é›é›ªçº·çº·ã€‚", source: "é«˜é€‚ã€Šåˆ«è‘£å¤§ã€‹" },   
          { image: "é›ª", verse: "çª—å«è¥¿å²­åƒç§‹é›ªï¼Œé—¨æ³Šä¸œå´ä¸‡é‡Œèˆ¹ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "é»„é¹‚", verse: "ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³ï¼Œä¸€è¡Œç™½é¹­ä¸Šé’å¤©ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "æŸ³", verse: "ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³ï¼Œä¸€è¡Œç™½é¹­ä¸Šé’å¤©ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "ç™½é¹­", verse: "ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³ï¼Œä¸€è¡Œç™½é¹­ä¸Šé’å¤©ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "é’å¤©", verse: "ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³ï¼Œä¸€è¡Œç™½é¹­ä¸Šé’å¤©ã€‚", source: "æœç”«ã€Šç»å¥ã€‹" },
          { image: "å¾®é£", verse: "é»„å¸ˆå¡”å‰æ±Ÿæ°´ä¸œï¼Œæ˜¥å…‰æ‡’å›°å€šå¾®é£ã€‚", source: "æœç”«ã€Šæ±Ÿç•”ç‹¬æ­¥å¯»èŠ±ã€‹" },
          { image: "æ¡ƒèŠ±", verse: "æ¡ƒèŠ±ä¸€ç°‡å¼€æ— ä¸»ï¼Œå¯çˆ±æ·±çº¢çˆ±æµ…çº¢ï¼Ÿ", source: "æœç”«ã€Šæ±Ÿç•”ç‹¬æ­¥å¯»èŠ±ã€‹" },
          { image: "å­¤èˆŸ", verse: "å­¤èˆŸè“‘ç¬ ç¿ï¼Œç‹¬é’“å¯’æ±Ÿé›ªã€‚", source: "æŸ³å®—å…ƒã€Šæ±Ÿé›ªã€‹" },
          { image: "é›ª", verse: "å­¤èˆŸè“‘ç¬ ç¿ï¼Œç‹¬é’“å¯’æ±Ÿé›ªã€‚", source: "æŸ³å®—å…ƒã€Šæ±Ÿé›ªã€‹" },
          { image: "é¸Ÿ", verse: "åƒå±±é¸Ÿé£ç»ï¼Œä¸‡å¾„äººè¸ªç­", source: "æŸ³å®—å…ƒã€Šæ±Ÿé›ªã€‹" },
          { image: "åƒå±±", verse: "åƒå±±é¸Ÿé£ç»ï¼Œä¸‡å¾„äººè¸ªç­", source: "æŸ³å®—å…ƒã€Šæ±Ÿé›ªã€‹" },
          { image: "æ¯çˆ±", verse: "è°è¨€å¯¸è‰å¿ƒï¼ŒæŠ¥å¾—ä¸‰æ˜¥æ™–ã€‚", source: "å­ŸéƒŠã€Šæ¸¸å­åŸã€‹" },
          { image: "æ…ˆæ¯", verse: "æ…ˆæ¯æ‰‹ä¸­çº¿ï¼Œæ¸¸å­èº«ä¸Šè¡£ã€‚", source: "å­ŸéƒŠã€Šæ¸¸å­åŸã€‹" },
          { image: "æ¸¸å­", verse: "æ…ˆæ¯æ‰‹ä¸­çº¿ï¼Œæ¸¸å­èº«ä¸Šè¡£ã€‚", source: "å­ŸéƒŠã€Šæ¸¸å­åŸã€‹" },
          { image: "éœœå¶", verse: "åœè½¦åçˆ±æ«æ—æ™šï¼Œéœœå¶çº¢äºäºŒæœˆèŠ±ã€‚", source: "æœç‰§ã€Šå±±è¡Œã€‹" },
          { image: "äººå®¶", verse: "è¿œä¸Šå¯’å±±çŸ³å¾„æ–œï¼Œç™½äº‘æ·±å¤„æœ‰äººå®¶ã€‚", source: "æœç‰§ã€Šå±±è¡Œã€‹" },
          { image: "æ¸…æ˜", verse: "æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·ï¼Œè·¯ä¸Šè¡Œäººæ¬²æ–­é­‚ã€‚", source: "æœç‰§ã€Šæ¸…æ˜ã€‹" },
          { image: "é›¨", verse: "æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·ï¼Œè·¯ä¸Šè¡Œäººæ¬²æ–­é­‚ã€‚", source: "æœç‰§ã€Šæ¸…æ˜ã€‹" },
          { image: "è¡Œäºº", verse: "æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·ï¼Œè·¯ä¸Šè¡Œäººæ¬²æ–­é­‚ã€‚", source: "æœç‰§ã€Šæ¸…æ˜ã€‹" },
          { image: "é…’å®¶", verse: "å€Ÿé—®é…’å®¶ä½•å¤„æœ‰ï¼Œç‰§ç«¥é¥æŒ‡æèŠ±æ‘ã€‚", source: "æœç‰§ã€Šæ¸…æ˜ã€‹" },
          { image: "ç‰§ç«¥", verse: "å€Ÿé—®é…’å®¶ä½•å¤„æœ‰ï¼Œç‰§ç«¥é¥æŒ‡æèŠ±æ‘ã€‚", source: "æœç‰§ã€Šæ¸…æ˜ã€‹" }, 
          { image: "é›¨", verse: "å¤©è¡—å°é›¨æ¶¦å¦‚é…¥ï¼Œè‰è‰²é¥çœ‹è¿‘å´æ— ã€‚", source: "éŸ©æ„ˆã€Šæ—©æ˜¥å‘ˆæ°´éƒ¨å¼ åå…«å‘˜å¤–ã€‹" },
          { image: "è‰", verse: "å¤©è¡—å°é›¨æ¶¦å¦‚é…¥ï¼Œè‰è‰²é¥çœ‹è¿‘å´æ— ã€‚", source: "éŸ©æ„ˆã€Šæ—©æ˜¥å‘ˆæ°´éƒ¨å¼ åå…«å‘˜å¤–ã€‹" },
          { image: "çƒŸæŸ³", verse: "æœ€æ˜¯ä¸€å¹´æ˜¥å¥½å¤„ï¼Œç»èƒœçƒŸæŸ³æ»¡çš‡éƒ½ã€‚", source: "éŸ©æ„ˆã€Šæ—©æ˜¥å‘ˆæ°´éƒ¨å¼ åå…«å‘˜å¤–ã€‹" },
          { image: "ç®¬ç¬ ", verse: "é’ç®¬ç¬ ï¼Œç»¿è“‘è¡£ï¼Œæ–œé£ç»†é›¨ä¸é¡»å½’ã€‚", source: "å¼ å¿—å’Œã€Šæ¸”æ­Œå­ã€‹" },
          { image: "è“‘è¡£", verse: "é’ç®¬ç¬ ï¼Œç»¿è“‘è¡£ï¼Œæ–œé£ç»†é›¨ä¸é¡»å½’ã€‚", source: "å¼ å¿—å’Œã€Šæ¸”æ­Œå­ã€‹" },
          { image: "ç™½é¹­", verse: "è¥¿å¡å±±å‰ç™½é¹­é£ï¼Œæ¡ƒèŠ±æµæ°´é³œé±¼è‚¥ã€‚", source: "å¼ å¿—å’Œã€Šæ¸”æ­Œå­ã€‹" },
          { image: "é³œé±¼", verse: "è¥¿å¡å±±å‰ç™½é¹­é£ï¼Œæ¡ƒèŠ±æµæ°´é³œé±¼è‚¥ã€‚", source: "å¼ å¿—å’Œã€Šæ¸”æ­Œå­ã€‹" },
          { image: "æ´åº­", verse: "é¥æœ›æ´åº­å±±æ°´è‰²ï¼Œç™½é“¶ç›˜é‡Œä¸€é’èºã€‚", source: "åˆ˜ç¦¹é”¡ã€Šæœ›æ´åº­ã€‹" },
          { image: "æ¹–å…‰", verse: "æ¹–å…‰ç§‹æœˆä¸¤ç›¸å’Œï¼Œæ½­é¢æ— é£é•œæœªç£¨ã€‚", source: "åˆ˜ç¦¹é”¡ã€Šæœ›æ´åº­ã€‹" },
          { image: "é»„æ²³", verse: "ä¹æ›²é»„æ²³ä¸‡é‡Œæ²™ï¼Œæµªæ·˜é£ç°¸è‡ªå¤©æ¶¯ã€‚", source: "åˆ˜ç¦¹é”¡ã€Šæµªæ·˜æ²™ã€‹" },
          { image: "é“¶æ²³", verse: "å¦‚ä»Šç›´ä¸Šé“¶æ²³å»ï¼ŒåŒåˆ°ç‰µç‰›ç»‡å¥³å®¶ã€‚", source: "åˆ˜ç¦¹é”¡ã€Šæµªæ·˜æ²™ã€‹" },
          { image: "ç‰µç‰›ç»‡å¥³", verse: "å¦‚ä»Šç›´ä¸Šé“¶æ²³å»ï¼ŒåŒåˆ°ç‰µç‰›ç»‡å¥³å®¶ã€‚", source: "åˆ˜ç¦¹é”¡ã€Šæµªæ·˜æ²™ã€‹" },
          { image: "æ¸”ç«", verse: "æœˆè½ä¹Œå•¼éœœæ»¡å¤©ï¼Œæ±Ÿæ«æ¸”ç«å¯¹æ„çœ ã€‚", source: "å¼ ç»§ã€Šæ«æ¡¥å¤œæ³Šã€‹" },
          { image: "å§‘è‹åŸ", verse: "å§‘è‹åŸå¤–å¯’å±±å¯ºï¼Œå¤œåŠé’Ÿå£°åˆ°å®¢èˆ¹ã€‚", source: "å¼ ç»§ã€Šæ«æ¡¥å¤œæ³Šã€‹" },
          { image: "é»„é¹‚", verse: "ç‹¬æ€œå¹½è‰æ¶§è¾¹ç”Ÿï¼Œä¸Šæœ‰é»„é¹‚æ·±æ ‘é¸£ã€‚", source: "éŸ¦åº”ç‰©ã€Šæ»å·è¥¿æ¶§ã€‹" },
          { image: "é‡æ¸¡", verse: "æ˜¥æ½®å¸¦é›¨æ™šæ¥æ€¥ï¼Œé‡æ¸¡æ— äººèˆŸè‡ªæ¨ªã€‚", source: "éŸ¦åº”ç‰©ã€Šæ»å·è¥¿æ¶§ã€‹" },
          { image: "å•äº", verse: "æœˆé»‘é›é£é«˜ï¼Œå•äºå¤œéé€ƒã€‚", source: "å¢çº¶ã€Šå¡ä¸‹æ›²ã€‹" },
          { image: "é›ª", verse: "æ¬²å°†è½»éª‘é€ï¼Œå¤§é›ªæ»¡å¼“åˆ€ã€‚", source: "å¢çº¶ã€Šå¡ä¸‹æ›²ã€‹" },
          { image: "é‡ç«", verse: "é‡ç«çƒ§ä¸å°½ï¼Œæ˜¥é£å¹åˆç”Ÿã€‚", source: "ç™½å±…æ˜“ã€Šèµ‹å¾—å¤åŸè‰é€åˆ«ã€‹" },
          { image: "è‰", verse: "ç¦»ç¦»åŸä¸Šè‰ï¼Œä¸€å²ä¸€æ¯è£ã€‚", source: "ç™½å±…æ˜“ã€Šèµ‹å¾—å¤åŸè‰é€åˆ«ã€‹" },
          { image: "å¨ƒå¨ƒ", verse: "å°å¨ƒæ’‘å°è‰‡ï¼Œå·é‡‡ç™½è²å›ã€‚", source: "ç™½å±…æ˜“ã€Šæ± ä¸Šã€‹" },
          { image: "æµ®è", verse: "ä¸è§£è—è¸ªè¿¹ï¼Œæµ®èä¸€é“å¼€ã€‚", source: "ç™½å±…æ˜“ã€Šæ± ä¸Šã€‹" },
          { image: "æ±Ÿå—", verse: "æ±Ÿå—å¥½ï¼Œé£æ™¯æ—§æ›¾è°™ã€‚", source: "ç™½å±…æ˜“ã€Šå¿†æ±Ÿå—ã€‹" },
          { image: "æ±Ÿå—", verse: "æ—¥å‡ºæ±ŸèŠ±çº¢èƒœç«ï¼Œæ˜¥æ¥æ±Ÿæ°´ç»¿å¦‚è“ï¼Œèƒ½ä¸å¿†æ±Ÿå—ï¼Ÿ", source: "ç™½å±…æ˜“ã€Šå¿†æ±Ÿå—ã€‹" },
          { image: "è·¯äºº", verse: "è·¯äººå€Ÿé—®é¥æ‹›æ‰‹ï¼Œæ€•å¾—é±¼æƒŠä¸åº”äººã€‚", source: "èƒ¡ä»¤èƒ½ã€Šå°å„¿å‚é’“ã€‹" },
          { image: "å°å„¿", verse: "è“¬å¤´ç¨šå­å­¦å‚çº¶ï¼Œä¾§åè“è‹”è‰æ˜ èº«ã€‚", source: "èƒ¡ä»¤èƒ½ã€Šå°å„¿å‚é’“ã€‹" },
          { image: "ç«¥å­", verse: "æ¾ä¸‹é—®ç«¥å­ï¼Œè¨€å¸ˆé‡‡è¯å»ã€‚", source: "è´¾å²›ã€Šå¯»éšè€…ä¸é‡ã€‹" },
          { image: "æ¥¼å°", verse: "å—æœå››ç™¾å…«åå¯ºï¼Œå¤šå°‘æ¥¼å°çƒŸé›¨ä¸­ã€‚", source: "æœç‰§ã€Šæ±Ÿå—æ˜¥ã€‹" },
          { image: "é…’æ——", verse: "åƒé‡Œèºå•¼ç»¿æ˜ çº¢ï¼Œæ°´æ‘å±±éƒ­é…’æ——é£ã€‚", source: "æœç‰§ã€Šæ±Ÿå—æ˜¥ã€‹" },
          { image: "èœœ", verse: "é‡‡å¾—ç™¾èŠ±æˆèœœåï¼Œä¸ºè°è¾›è‹¦ä¸ºè°ç”œã€‚", source: "ç½—éšã€Šèœ‚ã€‹" },
          { image: "é²ˆé±¼", verse: "æ±Ÿä¸Šå¾€æ¥äººï¼Œä½†çˆ±é²ˆé±¼ç¾ã€‚", source: "èŒƒä»²æ·¹ã€Šæ±Ÿä¸Šæ¸”è€…ã€‹" },
          { image: "èˆŸ", verse: "å›çœ‹ä¸€å¶èˆŸï¼Œå‡ºæ²¡é£æ³¢é‡Œã€‚", source: "èŒƒä»²æ·¹ã€Šæ±Ÿä¸Šæ¸”è€…ã€‹" },
          { image: "äººæ°", verse: "ç”Ÿå½“ä½œäººæ°ï¼Œæ­»äº¦ä¸ºé¬¼é›„ã€‚", source: "ææ¸…ç…§ã€Šå¤æ—¥ç»å¥ã€‹" },
          { image: "å± è‹", verse: "çˆ†ç«¹å£°ä¸­ä¸€å²é™¤ï¼Œæ˜¥é£é€æš–å…¥å± è‹", source: "ç‹å®‰çŸ³ã€Šå…ƒæ—¥ã€‹" },
          { image: "æ¡ƒç¬¦", verse: "åƒé—¨ä¸‡æˆ·æ›ˆæ›ˆæ—¥ï¼Œæ€»æŠŠæ–°æ¡ƒæ¢æ—§ç¬¦", source: "ç‹å®‰çŸ³ã€Šå…ƒæ—¥ã€‹" },
          { image: "æ˜¥é£", verse: "æ˜¥é£åˆç»¿æ±Ÿå—å²¸ï¼Œæ˜æœˆä½•æ—¶ç…§æˆ‘è¿˜ã€‚", source: "ç‹å®‰çŸ³ã€Šæ³Šèˆ¹ç“œæ´²ã€‹" },
          { image: "ç“œå·", verse: "äº¬å£ç“œæ´²ä¸€æ°´é—´ï¼Œé’Ÿå±±åªéš”æ•°é‡å±±ã€‚", source: "ç‹å®‰çŸ³ã€Šæ³Šèˆ¹ç“œæ´²ã€‹" },
          { image: "ç”°å›­", verse: "ä¸€æ°´æŠ¤ç”°å°†ç»¿ç»•ï¼Œä¸¤å±±æ’é—¼é€é’æ¥ã€‚", source: "ç‹å®‰çŸ³ã€Šä¹¦æ¹–é˜´å…ˆç”Ÿå£ã€‹" },
          { image: "èŒ…æª", verse: "èŒ…æªé•¿æ‰«å‡€æ— è‹”ï¼ŒèŠ±æœ¨æˆç•¦æ‰‹è‡ªæ ½ã€‚", source: "ç‹å®‰çŸ³ã€Šä¹¦æ¹–é˜´å…ˆç”Ÿå£ã€‹" },
          { image: "ä¹Œäº‘", verse: "é»‘äº‘ç¿»å¢¨æœªé®å±±ï¼Œç™½é›¨è·³ç ä¹±å…¥èˆ¹ã€‚", source: "è‹è½¼ã€Šå…­æœˆäºŒåä¸ƒæ—¥æœ›æ¹–æ¥¼é†‰ä¹¦ã€‹" },
          { image: "æœ›æ¹–æ¥¼", verse: "å·åœ°é£æ¥å¿½å¹æ•£ï¼Œæœ›æ¹–æ¥¼ä¸‹æ°´å¦‚å¤©ã€‚", source: "è‹è½¼ã€Šå…­æœˆäºŒåä¸ƒæ—¥æœ›æ¹–æ¥¼é†‰ä¹¦ã€‹" },
          { image: "è¥¿æ¹–", verse: "æ¬²æŠŠè¥¿æ¹–æ¯”è¥¿å­ï¼Œæ·¡å¦†æµ“æŠ¹æ€»ç›¸å®œã€‚", source: "è‹è½¼ã€Šé¥®æ¹–ä¸Šåˆæ™´åé›¨ã€‹" },
          { image: "é¸­", verse: "ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤æï¼Œæ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥ã€‚", source: "è‹è½¼ã€Šæƒ å´‡æ˜¥æ±Ÿæ™“æ™¯ã€‹" },
          { image: "æ¡ƒèŠ±", verse: "ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤æï¼Œæ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥ã€‚", source: "è‹è½¼ã€Šæƒ å´‡æ˜¥æ±Ÿæ™“æ™¯ã€‹" },
          { image: "åºå±±", verse: "ä¸è¯†åºå±±çœŸé¢ç›®ï¼Œåªç¼˜èº«åœ¨æ­¤å±±ä¸­ã€‚", source: "è‹è½¼ã€Šé¢˜è¥¿æ—å£ã€‹" },
          { image: "é»„é¹‚", verse: "ç»¿é˜´ä¸å‡æ¥æ—¶è·¯ï¼Œæ·»å¾—é»„é¹‚å››äº”å£°ã€‚", source: "æ›¾å‡ ã€Šä¸‰è¡¢é“ä¸­ã€‹" },
          { image: "æ¢…å­", verse: "æ¢…å­é»„æ—¶æ—¥æ—¥æ™´ï¼Œå°æºªæ³›å°½å´å±±è¡Œã€‚", source: "æ›¾å‡ ã€Šä¸‰è¡¢é“ä¸­ã€‹" },
          { image: "é™†æ¸¸çš„é—æ„¿", verse: "ç‹å¸ˆåŒ—å®šä¸­åŸæ—¥ï¼Œå®¶ç¥­æ— å¿˜å‘Šä¹ƒç¿ã€‚", source: "é™†æ¸¸ã€Šç¤ºå„¿ã€‹" },
          { image: "å±±æ²³", verse: "ä¸‰ä¸‡é‡Œæ²³ä¸œå…¥æµ·ï¼Œäº”åƒä»å²³ä¸Šæ‘©å¤©ã€‚", source: "é™†æ¸¸ã€Šç§‹å¤œå°†æ™“ç¯±é—¨è¿å‡‰æœ‰æ„Ÿã€‹" },
          { image: "å†œå¿™", verse: "æ˜¼å‡ºè€˜ç”°å¤œç»©éº»ï¼Œæ‘åº„å„¿å¥³å„å½“å®¶ã€‚", source: "èŒƒæˆå¤§ã€Šå››æ—¶ç”°å›­æ‚å…´ã€‹å…¶ä¸€" },
          { image: "ç«¥å­™", verse: "ç«¥å­™æœªè§£ä¾›è€•ç»‡ï¼Œä¹Ÿå‚æ¡‘é˜´å­¦ç§ç“œã€‚", source: "èŒƒæˆå¤§ã€Šå››æ—¶ç”°å›­æ‚å…´ã€‹å…¶ä¸€" },
          { image: "èœ»èœ“", verse: "æ—¥é•¿ç¯±è½æ— äººè¿‡ï¼Œå”¯æœ‰èœ»èœ“è›±è¶é£ã€‚", source: "èŒƒæˆå¤§ã€Šå››æ—¶ç”°å›­æ‚å…´ã€‹å…¶äºŒ" },
          { image: "æ¢…å­", verse: "æ¢…å­é‡‘é»„æå­è‚¥ï¼Œéº¦èŠ±é›ªç™½èœèŠ±ç¨€ã€‚", source: "èŒƒæˆå¤§ã€Šå››æ—¶ç”°å›­æ‚å…´ã€‹å…¶äºŒ" },
          { image: "æ³‰æ°´", verse: "æ³‰çœ¼æ— å£°æƒœç»†æµï¼Œæ ‘é˜´ç…§æ°´çˆ±æ™´æŸ”ã€‚", source: "æ¨ä¸‡é‡Œã€Šå°æ± ã€‹" },
          { image: "èœ»èœ“", verse: "å°è·æ‰éœ²å°–å°–è§’ï¼Œæ—©æœ‰èœ»èœ“ç«‹ä¸Šå¤´ã€‚", source: "æ¨ä¸‡é‡Œã€Šå°æ± ã€‹" },
          { image: "è·èŠ±", verse: "æ¥å¤©è²å¶æ— ç©·ç¢§ï¼Œæ˜ æ›°è·èŠ±åˆ«æ ·çº¢ã€‚", source: "æ¨ä¸‡é‡Œã€Šæ™“å‡ºå‡€æ…ˆå¯ºé€æ—å­æ–¹ã€‹" },
          { image: "å…­æœˆè¥¿æ¹–", verse: "æ¯•ç«Ÿè¥¿æ¹–å…­æœˆä¸­ï¼Œé£å…‰ä¸ä¸å››æ—¶åŒã€‚", source: "æ¨ä¸‡é‡Œã€Šæ™“å‡ºå‡€æ…ˆå¯ºé€æ—å­æ–¹ã€‹" },
          { image: "ä¸œé£", verse: "ç­‰é—²è¯†å¾—ä¸œé£é¢ï¼Œä¸‡ç´«åƒçº¢æ€»æ˜¯æ˜¥ã€‚", source: "æœ±ç†¹ã€Šæ˜¥æ—¥ã€‹" },
          { image: "æ­Œèˆ", verse: "å±±å¤–é’å±±æ¥¼å¤–æ¥¼ï¼Œè¥¿æ¹–æ­Œèˆå‡ æ—¶ä¼‘ï¼Ÿ", source: "æ—å‡ã€Šé¢˜ä¸´å®‰é‚¸ã€‹" },
          { image: "æ¸¸äºº", verse: "æš–é£ç†å¾—æ¸¸äººé†‰ï¼Œç›´æŠŠæ­å·ä½œæ±´å·ã€‚", source: "æ—å‡ã€Šé¢˜ä¸´å®‰é‚¸ã€‹" },
          { image: "çº¢æ", verse: "æ˜¥è‰²æ»¡å›­å…³ä¸ä½ï¼Œä¸€æçº¢æå‡ºå¢™æ¥ã€‚", source: "å¶ç»ç¿ã€Šæ¸¸å›­ä¸å€¼ã€‹" },
          { image: "æŸ´æ‰‰", verse: "åº”æ€œå±é½¿å°è‹è‹”ï¼Œå°æ‰£æŸ´æ‰‰ä¹…ä¸å¼€ã€‚", source: "å¶ç»ç¿ã€Šæ¸¸å›­ä¸å€¼ã€‹" },
          { image: "æœ±ç†¹çš„è¯»ä¹¦æ„Ÿæ‚Ÿ", verse: "é—®æ¸ é‚£å¾—æ¸…å¦‚è®¸ï¼Ÿä¸ºæœ‰æºå¤´æ´»æ°´æ¥ã€‚", source: "æœ±ç†¹ã€Šè§‚ä¹¦æœ‰æ„Ÿã€‹" },
          { image: "å­è§„", verse: "ç»¿éå±±åŸç™½æ»¡å·ï¼Œå­è§„å£°é‡Œé›¨å¦‚çƒŸã€‚", source: "ç¿å·ã€Šä¹¡æ‘å››æœˆã€‹" },
          { image: "èš•æ¡‘", verse: "ä¹¡æ‘å››æœˆé—²äººå°‘ï¼Œæ‰äº†èš•æ¡‘åˆæ’ç”°ã€‚", source: "ç¿å·ã€Šä¹¡æ‘å››æœˆã€‹" },
          { image: "ç‹å†•çš„æ¢…èŠ±", verse: "ä¸è¦äººå¤¸å¥½é¢œè‰²ï¼Œåªç•™æ¸…æ°”æ»¡ä¹¾å¤ã€‚", source: "ç‹å†•ã€Šå¢¨æ¢…ã€‹" },
          { image: "çŸ³ç°", verse: "ç²‰èº«ç¢éª¨å…¨ä¸æ€•ï¼Œè¦ç•™æ¸…ç™½åœ¨äººé—´ã€‚", source: "äºè°¦ã€ŠçŸ³ç°åŸã€‹" },
          { image: "äººæ‰", verse: "æˆ‘åŠå¤©å…¬é‡æŠ–æ“ï¼Œä¸æ‹˜ä¸€æ ¼é™äººæ‰ã€‚", source: "é¾šè‡ªçã€Šå·±äº¥æ‚è¯—ã€‹" },
          { image: "äºŒæœˆæ¨æŸ³", verse: "è‰é•¿èºé£äºŒæœˆå¤©ï¼Œæ‹‚å ¤æ¨æŸ³é†‰æ˜¥çƒŸã€‚", source: "é«˜é¼ã€Šæ‘å±…ã€‹" },
          { image: "å„¿ç«¥", verse: "å„¿ç«¥æ•£å­¦å½’æ¥æ—©ï¼Œå¿™è¶ä¸œé£æ”¾çº¸é¸¢", source: "é«˜é¼ã€Šæ‘å±…ã€‹" },
          { image: "ç‰§ç«¥", verse: "ç‰§ç«¥éª‘é»„ç‰›ï¼Œæ­Œå£°æŒ¯æ—æ¨¾ã€‚", source: "è¢æšã€Šæ‰€è§ã€‹" },
          { image: "ç«¹", verse: "å’¬å®šé’å±±ä¸æ”¾æ¾ï¼Œç«‹æ ¹åŸåœ¨ç ´å²©ä¸­ã€‚", source: "éƒ‘ç‡®ã€Šç«¹çŸ³ã€‹" }
        ];

        // Mode 3 Database
        const feihuaDatabase = [
            { image: "æœˆ", verse: "ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚", source: "æç™½ã€Šé™å¤œæ€ã€‹" },
            { image: "é…’", verse: "å¯¹é…’å½“æ­Œï¼Œäººç”Ÿå‡ ä½•ï¼Ÿ", source: "æ›¹æ“ã€ŠçŸ­æ­Œè¡Œã€‹" },
            { image: "èŠ±", verse: "æ„Ÿæ—¶èŠ±æº…æ³ªï¼Œæ¨åˆ«é¸ŸæƒŠå¿ƒã€‚", source: "æœç”«ã€Šæ˜¥æœ›ã€‹" },
            { image: "å±±", verse: "é‡‡èŠä¸œç¯±ä¸‹ï¼Œæ‚ ç„¶è§å—å±±ã€‚", source: "é™¶æ¸Šæ˜ã€Šé¥®é…’ã€‹" },
            { image: "æ°´", verse: "æŠ½åˆ€æ–­æ°´æ°´æ›´æµï¼Œä¸¾æ¯æ¶ˆæ„æ„æ›´æ„ã€‚", source: "æç™½ã€Šå®£å·è°¢æœ“æ¥¼é¥¯åˆ«æ ¡ä¹¦å”äº‘ã€‹" },
            { image: "é£", verse: "å¤œæ¥é£é›¨å£°ï¼ŒèŠ±è½çŸ¥å¤šå°‘ã€‚", source: "å­Ÿæµ©ç„¶ã€Šæ˜¥æ™“ã€‹" },
            { image: "é›ª", verse: "å­¤èˆŸè“‘ç¬ ç¿ï¼Œç‹¬é’“å¯’æ±Ÿé›ªã€‚", source: "æŸ³å®—å…ƒã€Šæ±Ÿé›ªã€‹" },
            { image: "æŸ³", verse: "ç¢§ç‰å¦†æˆä¸€æ ‘é«˜ï¼Œä¸‡æ¡å‚ä¸‹ç»¿ä¸ç»¦ã€‚", source: "è´ºçŸ¥ç« ã€Šå’æŸ³ã€‹" },
            { image: "äº‘", verse: "è¡Œåˆ°æ°´çª®è™•ï¼Œåçœ‹é›²èµ·æ™‚ã€‚", source: "ç‹ç¶­ã€Šçµ‚å—åˆ¥æ¥­ã€‹" },
            { image: "é¸Ÿ", verse: "åƒå±±é¸Ÿé£ç»ï¼Œä¸‡å¾„äººè¸ªç­ã€‚", source: "æŸ³å®—å…ƒã€Šæ±Ÿé›ªã€‹" },
            { image: "èˆŸ", verse: "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½ï¼Œè½»èˆŸå·²è¿‡ä¸‡é‡å±±ã€‚", source: "æç™½ã€Šæ—©å‘ç™½å¸åŸã€‹" },
            { image: "æ¢¦", verse: "é†‰åä¸çŸ¥å¤©åœ¨æ°´ï¼Œæ»¡èˆ¹æ¸…æ¢¦å‹æ˜Ÿæ²³ã€‚", source: "å”æ¸©å¦‚ã€Šé¢˜é¾™é˜³å¿é’è‰æ¹–ã€‹" },
            { image: "é›¨", verse: "æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·ï¼Œè·¯ä¸Šè¡Œäººæ¬²æ–­é­‚ã€‚", source: "æœç‰§ã€Šæ¸…æ˜ã€‹" },
            { image: "æ—¥", verse: "ç™½æ—¥ä¾å±±å°½ï¼Œé»„æ²³å…¥æµ·æµã€‚", source: "ç‹ä¹‹æ¶£ã€Šç™»é¹³é›€æ¥¼ã€‹" },
            { image: "æ¢…", verse: "å¢™è§’æ•°ææ¢…ï¼Œå‡Œå¯’ç‹¬è‡ªå¼€ã€‚", source: "ç‹å®‰çŸ³ã€Šæ¢…èŠ±ã€‹" },
            { image: "å‰‘", verse: "åœæ¯æŠ•ç®¸ä¸èƒ½é£Ÿï¼Œæ‹”å‰‘å››é¡¾å¿ƒèŒ«ç„¶ã€‚", source: "æç™½ã€Šè¡Œè·¯éš¾ã€‹" },
            { image: "ç´", verse: "ç‹¬åå¹½ç¯é‡Œï¼Œå¼¹ç´å¤é•¿å•¸ã€‚", source: "ç‹ç»´ã€Šç«¹é‡Œé¦†ã€‹" },
            { image: "ä¹¦", verse: "è¯»ä¹¦ç ´ä¸‡å·ï¼Œä¸‹ç¬”å¦‚æœ‰ç¥ã€‚", source: "æœç”«ã€Šå¥‰èµ éŸ¦å·¦ä¸ä¸ˆäºŒåäºŒéŸµã€‹" },
            { image: "æ˜¥", verse: "æ˜¥çœ ä¸è§‰æ™“ï¼Œå¤„å¤„é—»å•¼é¸Ÿã€‚", source: "å­Ÿæµ©ç„¶ã€Šæ˜¥æ™“ã€‹" },
            { image: "ç§‹", verse: "ç©ºå±±æ–°é›¨åï¼Œå¤©æ°”æ™šæ¥ç§‹ã€‚", source: "ç‹ç»´ã€Šå±±å±…ç§‹æšã€‹" },
            { image: "é©¬", verse: "ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼ï¼Œæµ…è‰æ‰èƒ½æ²¡é©¬è¹„ã€‚", source: "ç™½å±…æ˜“ã€Šé’±å¡˜æ¹–æ˜¥è¡Œã€‹" },
            { image: "æ¾", verse: "æ˜æœˆæ¾é—´ç…§ï¼Œæ¸…æ³‰çŸ³ä¸Šæµã€‚", source: "ç‹ç»´ã€Šå±±å±…ç§‹æšã€‹" },
            { image: "ç«¹", verse: "å’¬å®šé’å±±ä¸æ”¾æ¾ï¼Œç«‹æ ¹åŸåœ¨ç ´å²©ä¸­ã€‚", source: "éƒ‘ç‡®ã€Šç«¹çŸ³ã€‹" },
            { image: "å¶", verse: "ä¸çŸ¥ç»†å¶è°è£å‡ºï¼ŒäºŒæœˆæ˜¥é£ä¼¼å‰ªåˆ€ã€‚", source: "è´ºçŸ¥ç« ã€Šå’æŸ³ã€‹" },
            { image: "çº¢", verse: "ç­‰é—²è¯†å¾—ä¸œé£é¢ï¼Œä¸‡ç´«åƒçº¢æ€»æ˜¯æ˜¥ã€‚", source: "æœ±ç†¹ã€Šæ˜¥æ—¥ã€‹" },
            { image: "æ˜Ÿ", verse: "å¤©é˜¶å¤œè‰²å‡‰å¦‚æ°´ï¼Œå§çœ‹ç‰µç‰›ç»‡å¥³æ˜Ÿã€‚", source: "æœç‰§ã€Šç§‹å¤•ã€‹" },
            { image: "æ±Ÿ", verse: "é‡æ—·å¤©ä½æ ‘ï¼Œæ±Ÿæ¸…æœˆè¿‘äººã€‚", source: "å­Ÿæµ©ç„¶ã€Šå®¿å»ºå¾·æ±Ÿã€‹" },
            { image: "æ²³", verse: "å¤§æ¼ å­¤çƒŸç›´ï¼Œé•¿æ²³è½æ—¥åœ†ã€‚", source: "ç‹ç»´ã€Šä½¿è‡³å¡ä¸Šã€‹" },
            { image: "ä¹¡", verse: "å°‘å°ç¦»å®¶è€å¤§å›ï¼Œä¹¡éŸ³æ— æ”¹é¬“æ¯›è¡°ã€‚", source: "è´ºçŸ¥ç« ã€Šå›ä¹¡å¶ä¹¦ã€‹" },
            { image: "éœœ", verse: "æœˆè½ä¹Œå•¼éœœæ»¡å¤©ï¼Œæ±Ÿæ«æ¸”ç«å¯¹æ„çœ ã€‚", source: "å¼ ç»§ã€Šæ«æ¡¥å¤œæ³Šã€‹" },
            { image: "çƒ›", verse: "ä½•å½“å…±å‰ªè¥¿çª—çƒ›ï¼Œå´è¯å·´å±±å¤œé›¨æ—¶ã€‚", source: "æå•†éšã€Šå¤œé›¨å¯„åŒ—ã€‹" },
            { image: "æ³ª", verse: "èœ¡ç‚¬æˆç°æ³ªå§‹å¹²ã€‚", source: "æå•†éšã€Šæ— é¢˜ã€‹" },
            { image: "é—¨", verse: "æŸ´é—¨é—»çŠ¬å ï¼Œé£é›ªå¤œå½’äººã€‚", source: "åˆ˜é•¿å¿ã€Šé€¢é›ªå®¿èŠ™è“‰å±±ä¸»äººã€‹" },
            { image: "æ¥¼", verse: "æ¬²ç©·åƒé‡Œç›®ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼ã€‚", source: "ç‹ä¹‹æ¶£ã€Šç™»é¹³é›€æ¥¼ã€‹" },
            { image: "è‰", verse: "ç¦»ç¦»åŸä¸Šè‰ï¼Œä¸€å²ä¸€æ¯è£ã€‚", source: "ç™½å±…æ˜“ã€Šèµ‹å¾—å¤åŸè‰é€åˆ«ã€‹" },
            { image: "çŸ³", verse: "æ¸…æ³‰çŸ³ä¸Šæµã€‚", source: "ç‹ç»´ã€Šå±±å±…ç§‹æšã€‹" }
        ];

        const rewards = [
            "å¥–åŠ±ï¼šå…åšå®¶åŠ¡ä¸€æ¬¡",
            "å¥–åŠ±ï¼šå¯¹æ–¹ä¸ºä½ åŸè¯—ä¸€é¦–",
            "å¥–åŠ±ï¼šè·å¾—ä¸€æ¯å¥¶èŒ¶",
            "å¥–åŠ±ï¼šæŒ‡å®šå¯¹æ–¹åšä¸€ä¸ªé¬¼è„¸",
            "æƒ©ç½šï¼šå¤§å£°èƒŒè¯µã€Šé•¿æ¨æ­Œã€‹å‰å››å¥",
            "æƒ©ç½šï¼šåšäº”ä¸ªæ·±è¹²",
            "æƒ©ç½šï¼šå¤¸å¥–å¯¹æ–¹ä¸€åˆ†é’Ÿ",
            "æƒ©ç½šï¼šæ¨¡ä»¿å¤ä»£è¯—äººåŸè¯—åŠ¨ä½œ"
        ];

        // --- State Management ---
        const app = document.getElementById('app');
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modalContent');
        const closeModalBtn = document.getElementById('closeModal');

        // Init Global Systems
        VisualSys.init();
        UserSys.init();

        let gameState = {
            mode: null, // 'single', 'local', 'feihua', 'match'
            gridSize: 3,
            cards: [], // { id, content, isTrap, isFlipped, isMatched }
            turn: 'A', // 'A' or 'B'
            scores: { A: 0, B: 0 },
            trapsSet: { A: [], B: [] }, // Trap indices set by players
            setupPhase: null, // 'setting_A', 'setting_B', 'playing'
            history: [], // List of cards flipped for mind map
            matchState: {
                firstCard: null,
                isChecking: false,
                timeLeft: 0,
                timerInterval: null
            }
        };

        // --- Render Functions ---

        function renderHome() {
            AudioSys.init();
            app.innerHTML = `
                <div class="flex flex-col items-center justify-start w-full h-full pt-4 px-4">
                    <div class="w-full max-w-6xl grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4">
                        <!-- Single Player Card -->
                        <div onclick="initSinglePlayerSetup()" class="group relative cursor-pointer bg-white/70 hover:bg-white transition-all duration-300 p-6 rounded-lg shadow-sm hover:shadow-2xl border border-[#e6e6e6] hover:border-indigo-300 text-center flex flex-col items-center gap-4 transform hover:-translate-y-1">
                            <div class="w-16 h-16 rounded-full bg-indigo/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <span class="text-3xl text-indigo">ğŸŒ™</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-indigo mb-2">å•äººä¿®ç‚¼</h3>
                                <p class="text-xs text-gray-500">å“å‘³å¤éŸµ Â· æ·±åº¦èµæ</p>
                                <p class="text-xs text-gray-400 mt-1">ç¿»é˜…è¯—ç¯‡ï¼Œç”Ÿæˆå¯¼å›¾</p>
                            </div>
                            <div class="mt-2 text-indigo text-xs font-bold opacity-60 group-hover:opacity-100">ç‚¹å‡»è¿›å…¥ &rarr;</div>
                        </div>

                        <!-- Local Multiplayer Card -->
                        <div onclick="initLocalMultiplayerSetup()" class="group relative cursor-pointer bg-white/70 hover:bg-white transition-all duration-300 p-6 rounded-lg shadow-sm hover:shadow-2xl border border-[#e6e6e6] hover:border-cinnabar-300 text-center flex flex-col items-center gap-4 transform hover:-translate-y-1">
                            <div class="w-16 h-16 rounded-full bg-cinnabar/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <span class="text-3xl text-cinnabar">â™Ÿï¸</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-cinnabar mb-2">åŒäººå¯¹å¼ˆ</h3>
                                <p class="text-xs text-gray-500">äº’ç›¸å¸ƒé˜µ Â· æ­¥æ­¥æƒŠå¿ƒ</p>
                                <p class="text-xs text-gray-400 mt-1">è¸©ä¸­é™·é˜±åˆ¤è´Ÿ</p>
                            </div>
                            <div class="mt-2 text-cinnabar text-xs font-bold opacity-60 group-hover:opacity-100">ç‚¹å‡»è¿›å…¥ &rarr;</div>
                        </div>

                        <!-- Fei Hua Mode Card -->
                        <div onclick="initFeiHuaSetup()" class="group relative cursor-pointer bg-white/70 hover:bg-white transition-all duration-300 p-6 rounded-lg shadow-sm hover:shadow-2xl border border-[#e6e6e6] hover:border-bamboo-300 text-center flex flex-col items-center gap-4 transform hover:-translate-y-1">
                            <div class="w-16 h-16 rounded-full bg-bamboo/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <span class="text-3xl text-bamboo">ğŸŒ¸</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-bamboo mb-2">é£èŠ±ä¼ ç§€</h3>
                                <p class="text-xs text-gray-500">äº’ç›¸å¸ƒé˜µ Â· ç»å…¸æ„è±¡</p>
                                <p class="text-xs text-gray-400 mt-1">äº‘ç«¯å¯¹å†³ï¼Œé™·é˜±åˆ¤è´Ÿ</p>
                            </div>
                            <div class="mt-2 text-bamboo text-xs font-bold opacity-60 group-hover:opacity-100">ç‚¹å‡»è¿›å…¥ &rarr;</div>
                        </div>

                        <!-- Innovation Mode: Match Game -->
                        <div onclick="initMatchGameSetup()" class="group relative cursor-pointer bg-white/70 hover:bg-white transition-all duration-300 p-6 rounded-lg shadow-sm hover:shadow-2xl border border-[#e6e6e6] hover:border-gold-300 text-center flex flex-col items-center gap-4 transform hover:-translate-y-1">
                            <div class="w-16 h-16 rounded-full bg-gold/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                                <span class="text-3xl text-gold">ğŸ§©</span>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gold mb-2">çµçŠ€ç›¸é€š</h3>
                                <p class="text-xs text-gray-500">é™æ—¶æŒ‘æˆ˜ Â· è®°å¿†è¿çº¿</p>
                                <p class="text-xs text-gray-400 mt-1">å°†æ„è±¡ä¸è¯—å¥é…å¯¹</p>
                            </div>
                            <div class="mt-2 text-gold text-xs font-bold opacity-60 group-hover:opacity-100">ç‚¹å‡»è¿›å…¥ &rarr;</div>
                        </div>
                    </div>
                    
                    <div class="mt-12 text-center opacity-60">
                         <div class="w-16 h-1 bg-gradient-to-r from-transparent via-gold to-transparent mx-auto mb-4"></div>
                        <p class="text-sm font-serif italic text-gray-600">"è…¹æœ‰è¯—ä¹¦æ°”è‡ªå"</p>
                        <p class="text-xs text-gray-400 mt-2">ç‚¹å‡»å³ä¸Šè§’ç­‰çº§å›¾æ ‡æŸ¥çœ‹æˆå°±</p>
                    </div>
                </div>
            `;
        }

        // --- Single Player ---

        function initSinglePlayerSetup() {
            app.innerHTML = `
                <div class="flex flex-col items-center w-full max-w-2xl animate-fade-in-up">
                    <button onclick="renderHome()" class="self-start mb-4 text-sm text-gray-500 hover:text-ink">â† è¿”å›é¦–é¡µ</button>
                    <h2 class="text-2xl font-bold mb-2">å•äººä¿®ç‚¼</h2>
                    <p class="mb-6 text-gray-600 text-center">è§„åˆ™ï¼šæ— é™·é˜±ï¼Œå°½æƒ…ç¿»é˜…ã€‚ç¿»å¼€åè¯·å“è¯»èƒŒè¯µï¼Œ<br>é›†é½æ‰€æœ‰å¡ç‰‡åè‡ªåŠ¨ç”Ÿæˆã€è¯—è¯å¯¼å›¾ã€‘ã€‚</p>
                    
                    <div class="flex gap-4 mb-8">
                        <button onclick="startSingleGame(3)" class="px-6 py-3 bg-white border border-indigo text-indigo hover:bg-indigo hover:text-white rounded shadow-sm hover:shadow transition">3 Ã— 3 (ç®€å•)</button>
                        <button onclick="startSingleGame(4)" class="px-6 py-3 bg-white border border-indigo text-indigo hover:bg-indigo hover:text-white rounded shadow-sm hover:shadow transition">4 Ã— 4 (ä¸­ç­‰)</button>
                        <button onclick="startSingleGame(5)" class="px-6 py-3 bg-white border border-indigo text-indigo hover:bg-indigo hover:text-white rounded shadow-sm hover:shadow transition">5 Ã— 5 (å›°éš¾)</button>
                    </div>
                </div>
            `;
        }

        function startSingleGame(size) {
            gameState.mode = 'single';
            gameState.gridSize = size;
            gameState.history = [];
            
            // Generate Cards
            const totalCards = size * size;
            let deck = [...mainDatabase].sort(() => 0.5 - Math.random()).slice(0, totalCards);
            
            gameState.cards = deck.map((item, index) => ({
                id: index,
                ...item,
                isTrap: false,
                isFlipped: false,
                state: 'hidden'
            }));

            renderGrid();
        }

        // --- Local Multiplayer ---

        function initLocalMultiplayerSetup() {
            app.innerHTML = `
                <div class="flex flex-col items-center w-full max-w-2xl text-center animate-fade-in-up">
                     <button onclick="renderHome()" class="self-start mb-4 text-sm text-gray-500 hover:text-ink">â† è¿”å›é¦–é¡µ</button>
                    <h2 class="text-2xl font-bold mb-4">åŒäººå¯¹å¼ˆ (6Ã—6)</h2>
                    <p class="mb-6">è§„åˆ™ï¼šåŒæ–¹è½®æµåœ¨åŒä¸€æ£‹ç›˜ä¸Šå¸ƒç½®1ä¸ªâ€œå¢¨æ¸â€é™·é˜±ã€‚<br>å¸ƒé˜µå®Œæˆåï¼Œå¼€å§‹å¯¹æˆ˜ï¼Œè¸©ä¸­é™·é˜±è€…åˆ¤è´Ÿã€‚</p>
                    <button onclick="startMultiplayerSetupPhase('local')" class="px-8 py-3 bg-cinnabar text-white rounded text-lg font-bold shadow-lg hover:scale-105 transition">å¼€å§‹å¸ƒé˜µ</button>
                </div>
            `;
        }

        // --- Fei Hua Mode ---
        function initFeiHuaSetup() {
            app.innerHTML = `
                <div class="flex flex-col items-center w-full max-w-2xl text-center animate-fade-in-up">
                     <button onclick="renderHome()" class="self-start mb-4 text-sm text-gray-500 hover:text-ink">â† è¿”å›é¦–é¡µ</button>
                    <h2 class="text-2xl font-bold mb-4">é£èŠ±ä¼ ç§€ (6Ã—6)</h2>
                    <p class="mb-6">è§„åˆ™ï¼šä½¿ç”¨ç»å…¸å•å­—æ„è±¡å¡ç‰Œï¼ˆå¦‚ï¼šæœˆã€é…’ã€èŠ±ï¼‰ã€‚<br>åŒæ–¹è½®æµå¸ƒä¸‹é™·é˜±ï¼ˆå¢¨æ¸ï¼‰ï¼Œéšåå¯¹å¼ˆã€‚è¸©ä¸­é™·é˜±è€…åˆ¤è´Ÿã€‚</p>
                    <button onclick="startMultiplayerSetupPhase('feihua')" class="px-8 py-3 bg-bamboo text-white rounded text-lg font-bold shadow-lg hover:scale-105 transition">å¼€å§‹å¯¹å†³</button>
                </div>
            `;
        }

        // --- Innovation Mode: Match Game ---
        function initMatchGameSetup() {
            app.innerHTML = `
                <div class="flex flex-col items-center w-full max-w-2xl text-center animate-fade-in-up">
                     <button onclick="renderHome()" class="self-start mb-4 text-sm text-gray-500 hover:text-ink">â† è¿”å›é¦–é¡µ</button>
                    <h2 class="text-2xl font-bold mb-2">çµçŠ€ç›¸é€š</h2>
                    <p class="mb-2 text-sm text-gold font-bold">é™æ—¶è®°å¿† Â· æ„è±¡é…å¯¹</p>
                    <p class="mb-6 text-gray-600">è§„åˆ™ï¼šå¡ç‰‡åˆ†ä¸º <span class="text-cinnabar font-bold">çº¢è‰²æ„è±¡å¡</span> ä¸ <span class="text-indigo font-bold">è“è‰²è¯—å¥å¡</span>ã€‚<br>è¯·åœ¨é™æ—¶å†…ï¼Œå°†æ„è±¡ï¼ˆå¦‚ï¼šæœˆï¼‰ä¸åŒ…å«è¯¥æ„è±¡çš„è¯—å¥å¡ç‰‡é…å¯¹æ¶ˆé™¤ã€‚</p>
                    
                    <div class="flex gap-4 mb-8">
                        <button onclick="startMatchGame(4, 70)" class="px-8 py-3 bg-white border border-gold text-gold hover:bg-gold hover:text-white rounded shadow-sm hover:shadow transition text-lg font-bold">å¼€å§‹æŒ‘æˆ˜ (4x4, 70ç§’)</button>
                    </div>
                </div>
            `;
        }

        function startMatchGame(size, time) {
            gameState.mode = 'match';
            gameState.gridSize = size;
            gameState.matchState.timeLeft = time;
            gameState.matchState.firstCard = null;
            gameState.matchState.isChecking = false;
            
            // Generate Pairs
            const pairCount = (size * size) / 2;
            let sourceDeck = [...mainDatabase].sort(() => 0.5 - Math.random()).slice(0, pairCount);
            
            // Create A (Image) and B (Verse) cards
            let deck = [];
            sourceDeck.forEach((item, index) => {
                // Card A: Image
                deck.push({
                    id: index * 2,
                    pairId: index,
                    type: 'image',
                    text: item.image,
                    subtext: 'æ„è±¡',
                    fullItem: item,
                    isFlipped: false,
                    isMatched: false
                });
                // Card B: Verse
                deck.push({
                    id: index * 2 + 1,
                    pairId: index,
                    type: 'verse',
                    text: item.verse,
                    subtext: item.source,
                    fullItem: item,
                    isFlipped: false,
                    isMatched: false
                });
            });
            
            gameState.cards = deck.sort(() => 0.5 - Math.random());
            
            renderMatchGame();
            startTimer();
        }

        function startTimer() {
            if (gameState.matchState.timerInterval) clearInterval(gameState.matchState.timerInterval);
            gameState.matchState.timerInterval = setInterval(() => {
                gameState.matchState.timeLeft--;
                const bar = document.getElementById('timer-bar');
                const text = document.getElementById('timer-text');
                if (bar && text) {
                    const percent = (gameState.matchState.timeLeft / (gameState.gridSize === 4 ? 60 : 90)) * 100;
                    bar.style.width = percent + '%';
                    text.innerText = gameState.matchState.timeLeft + 's';
                    
                    if (percent < 30) bar.classList.add('bg-red-500');
                }
                
                if (gameState.matchState.timeLeft <= 0) {
                    clearInterval(gameState.matchState.timerInterval);
                    endMatchGame(false);
                }
            }, 1000);
        }

        function renderMatchGame() {
            const gridClass = `grid-cols-${gameState.gridSize}`;
            
            app.innerHTML = `
                <div class="relative w-full max-w-2xl px-4 flex flex-col items-center">
                    <div class="w-full flex justify-between items-end mb-2">
                        <button onclick="clearInterval(gameState.matchState.timerInterval); renderHome()" class="px-3 py-1 text-xs border border-gray-400 rounded text-gray-600 hover:bg-gray-100 transition">é€€å‡º</button>
                        <div class="text-right">
                             <div class="text-xs text-gray-500">ä¸€ç‚·é¦™</div>
                             <div class="text-xl font-mono font-bold text-gold" id="timer-text">${gameState.matchState.timeLeft}s</div>
                        </div>
                    </div>
                    
                    <!-- Timer Bar -->
                    <div class="w-full h-2 bg-gray-200 rounded-full mb-6 overflow-hidden">
                        <div id="timer-bar" class="h-full bg-gold transition-all duration-1000 ease-linear" style="width: 100%"></div>
                    </div>

                    <div class="grid ${gridClass} gap-2 w-full perspective">
                        ${gameState.cards.map(card => `
                            <div class="card w-full aspect-square cursor-pointer ${card.isFlipped ? 'flipped' : ''} ${card.isMatched ? 'opacity-0 pointer-events-none' : ''}" 
                                 onclick="handleMatchClick(${card.id})"
                                 style="transition: opacity 0.5s, transform 0.6s;">
                                <div class="card-inner">
                                    <div class="card-front bg-white border-2 border-gold/30 flex items-center justify-center">
                                        <div class="w-8 h-8 rounded-full bg-gold/10 flex items-center justify-center">
                                            <span class="text-gold text-lg">?</span>
                                        </div>
                                    </div>
                                    <div class="card-back ${card.type === 'image' ? 'bg-red-50 border-red-200' : 'bg-blue-50 border-blue-200'} border-2 text-center flex flex-col items-center justify-center p-1">
                                        ${card.type === 'image' 
                                            ? `<span class="text-2xl font-bold text-cinnabar mb-1">${card.text}</span><span class="text-[10px] text-red-400 border border-red-200 px-1 rounded">æ„è±¡</span>` 
                                            : `<span class="text-[10px] sm:text-xs font-bold text-indigo leading-tight mb-1 line-clamp-3">${card.text}</span><span class="text-[8px] text-indigo-400 scale-90">${card.subtext}</span>`
                                        }
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function handleMatchClick(id) {
            if (gameState.matchState.isChecking) return;
            
            const card = gameState.cards.find(c => c.id === id);
            if (card.isFlipped || card.isMatched) return;

            AudioSys.playFlip();
            card.isFlipped = true;
            renderMatchGame();

            if (!gameState.matchState.firstCard) {
                // First card flipped
                gameState.matchState.firstCard = card;
            } else {
                // Second card flipped
                gameState.matchState.isChecking = true;
                const first = gameState.matchState.firstCard;
                
                if (first.pairId === card.pairId) {
                    // Match!
                    AudioSys.playWin(); // Use win sound for match
                    setTimeout(() => {
                        first.isMatched = true;
                        card.isMatched = true;
                        gameState.matchState.firstCard = null;
                        gameState.matchState.isChecking = false;
                        
                        // Check Win
                        if (gameState.cards.every(c => c.isMatched)) {
                            clearInterval(gameState.matchState.timerInterval);
                            endMatchGame(true);
                        } else {
                            renderMatchGame();
                        }
                    }, 600);
                } else {
                    // No Match
                    setTimeout(() => {
                        first.isFlipped = false;
                        card.isFlipped = false;
                        gameState.matchState.firstCard = null;
                        gameState.matchState.isChecking = false;
                        renderMatchGame();
                    }, 1000);
                }
            }
        }

        function endMatchGame(isWin) {
            const title = isWin ? "çµçŠ€ç›¸é€š" : "æ—¶è¾°å·²åˆ°";
            const color = isWin ? "text-gold" : "text-gray-500";
            const msg = isWin ? "æ­å–œï¼æ‚¨æˆåŠŸè¿˜åŸäº†æ‰€æœ‰è¯—è¯æ„è±¡ã€‚" : "å¾ˆé—æ†¾ï¼Œæœªèƒ½å®Œæˆæ‰€æœ‰é…å¯¹ã€‚";
            
            let xpMsg = "";
            let stampHtml = "";
            
            if (isWin) {
                const xpGain = gameState.gridSize * 15;
                UserSys.addXP(xpGain);
                UserSys.addStamp('æ•æ·');
                xpMsg = `<p class="mt-2 text-xs font-bold text-gold">+${xpGain} å­¦è¯†å€¼</p>`;
                stampHtml = `<div class="absolute top-0 right-0 stamp-seal">æ•æ·</div>`;
            }

            showModal(`
                <div class="text-center relative">
                    ${stampHtml}
                    <h2 class="text-3xl font-bold mb-4 ${color}">${title}</h2>
                    <p class="mb-2 text-gray-600">${msg}</p>
                    ${xpMsg}
                    <div class="flex justify-center gap-4 mt-6">
                        <button onclick="closeModal(); initMatchGameSetup();" class="px-6 py-2 border border-gold text-gold rounded hover:bg-gold hover:text-white transition">å†è¯•ä¸€æ¬¡</button>
                        <button onclick="closeModal(); renderHome();" class="px-6 py-2 bg-gray-800 text-white rounded hover:bg-black transition">è¿”å›é¦–é¡µ</button>
                    </div>
                </div>
            `);
        }

        function startMultiplayerSetupPhase(mode) {
            gameState.mode = mode; // 'local' or 'feihua'
            gameState.gridSize = 6;
            gameState.scores = { A: 0, B: 0 };
            gameState.turn = 'A';
            gameState.history = [];
            gameState.trapsSet = { A: [], B: [] };

            const totalCards = 36;
            let sourceDB = (mode === 'feihua') ? feihuaDatabase : mainDatabase;
            let deck = [...sourceDB].sort(() => 0.5 - Math.random()).slice(0, totalCards);
            
            gameState.cards = deck.map((item, index) => ({
                id: index,
                ...item,
                isTrap: false, 
                isFlipped: false,
                trapOwner: null
            }));

            // Trap setup for BOTH modes now
            gameState.setupPhase = 'setting_A';
            renderTrapSetup('A');
        }

        function renderTrapSetup(player) {
            const playerName = player === 'A' ? 'ç©å®¶ A (çº¢æ–¹)' : 'ç©å®¶ B (è“æ–¹)';
            const colorClass = player === 'A' ? 'text-cinnabar' : 'text-indigo';
            const currentCount = gameState.trapsSet[player].length;
            const limit = 1;
            
            app.innerHTML = `
                <div class="flex flex-col items-center w-full">
                    <h2 class="text-2xl font-bold mb-2 ${colorClass}">${playerName} å¸ƒé˜µ</h2>
                    <p class="mb-4 text-sm text-gray-600">è¯·é€‰æ‹© <span class="font-bold text-black">1</span> å¼ å¡ç‰‡ä½œä¸ºé™·é˜±ï¼ˆå¢¨æ¸ï¼‰</p>
                    <div id="grid-container" class="grid gap-2 mb-6" style="grid-template-columns: repeat(6, minmax(0, 1fr));">
                        ${gameState.cards.map(card => `
                            <div onclick="selectTrap(${card.id}, '${player}')" 
                                 class="w-10 h-10 sm:w-14 sm:h-14 bg-white border border-gray-300 flex items-center justify-center cursor-pointer hover:bg-gray-100 transition rounded
                                 ${gameState.trapsSet[player].includes(card.id) ? (player === 'A' ? 'bg-red-100 border-red-500 ring-2 ring-red-200' : 'bg-blue-100 border-blue-500 ring-2 ring-blue-200') : ''}">
                                <span class="text-[10px] sm:text-xs text-gray-400">${card.image}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="text-xs text-gray-500 mb-4">ç‚¹å‡»æ£‹ç›˜é€‰æ‹©ä¸€ä¸ªä½ç½®</div>
                    <button onclick="confirmTraps('${player}')" class="px-6 py-2 bg-gray-800 text-white rounded hover:bg-black disabled:opacity-50 transition" ${currentCount < limit ? 'disabled' : ''}>
                        ç¡®è®¤å¸ƒé˜µ (${currentCount}/${limit})
                    </button>
                </div>
            `;
        }

        function selectTrap(id, player) {
            AudioSys.playFlip(); // Sound feedback
            // Limit to 1, replace if exists
            gameState.trapsSet[player] = [id]; 
            renderTrapSetup(player);
        }

        function confirmTraps(player) {
            if (player === 'A') {
                gameState.setupPhase = 'setting_B';
                // Interstitial
                app.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-64 animate-pulse">
                        <h2 class="text-2xl font-bold mb-4">è¯·ç©å®¶ A ç¦»å±</h2>
                        <button onclick="renderTrapSetup('B')" class="px-6 py-2 bg-indigo text-white rounded shadow-lg">ç©å®¶ B å¼€å§‹å¸ƒé˜µ</button>
                    </div>
                `;
            } else {
                gameState.setupPhase = 'playing';
                app.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-64">
                        <h2 class="text-2xl font-bold mb-4">å¸ƒé˜µå®Œæˆï¼</h2>
                        <p class="mb-4 text-gray-600">æ¸¸æˆå¼€å§‹ï¼Œç”± ç©å®¶ A å…ˆæ‰‹ã€‚</p>
                        <button onclick="renderGrid()" class="px-6 py-2 bg-cinnabar text-white rounded shadow-lg hover:scale-105 transition">å¼€å§‹å¯¹å¼ˆ</button>
                    </div>
                `;
            }
        }

        // --- Core Gameplay UI ---

        function renderGrid() {
            // Safety check for match mode calling wrong render
            if (gameState.mode === 'match') {
                renderMatchGame();
                return;
            }

            const isMulti = (gameState.mode === 'local' || gameState.mode === 'feihua');
            const gridClass = isMulti ? `grid-cols-6` : `grid-cols-${gameState.gridSize}`;
            const maxWidth = isMulti ? 'max-w-4xl' : 'max-w-xl';
            
            let headerHTML = '';
            if (gameState.mode === 'single') {
                headerHTML = `
                    <div class="mb-4 text-center">
                        <button onclick="renderHome()" class="px-4 py-1 text-xs border border-gray-400 rounded text-gray-600 mb-2 hover:bg-gray-100 transition">é€€å‡ºæ¸¸æˆ</button>
                        <h2 class="text-xl font-bold text-indigo">å“å‘³å¤éŸµ</h2>
                    </div>
                `;
            } else {
                headerHTML = `
                    <div class="relative w-full mb-4 px-4">
                        <div class="absolute top-0 right-4">
                             <button onclick="renderHome()" class="text-xs text-gray-400 hover:text-cinnabar border border-gray-300 rounded px-2 py-1 bg-white">é€€å‡º</button>
                        </div>
                        <div class="flex justify-between items-center bg-white/50 p-2 rounded-lg mt-6">
                            <div class="text-center p-2 rounded border-b-2 ${gameState.turn === 'A' ? 'border-cinnabar bg-red-50' : 'border-transparent opacity-50'} transition-all">
                                <h3 class="text-cinnabar font-bold text-sm">ç©å®¶ A (çº¢)</h3>
                                <p class="text-2xl font-mono">${gameState.scores.A}</p>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-400 mb-1">å½“å‰å›åˆ</div>
                                <div class="text-xl font-bold ${gameState.turn === 'A' ? 'text-cinnabar' : 'text-indigo'}">
                                    ${gameState.turn === 'A' ? 'A' : 'B'}
                                </div>
                            </div>
                            <div class="text-center p-2 rounded border-b-2 ${gameState.turn === 'B' ? 'border-indigo bg-blue-50' : 'border-transparent opacity-50'} transition-all">
                                <h3 class="text-indigo font-bold text-sm">ç©å®¶ B (è“)</h3>
                                <p class="text-2xl font-mono">${gameState.scores.B}</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            app.innerHTML = `
                ${headerHTML}
                <div class="grid ${gridClass} gap-2 sm:gap-4 w-full ${maxWidth} mx-auto perspective px-2">
                    ${gameState.cards.map(card => `
                        <div class="card w-full aspect-square cursor-pointer ${card.isFlipped ? 'flipped' : ''}" onclick="handleCardClick(${card.id})">
                            <div class="card-inner">
                                <div class="card-front bg-white hover:bg-orange-50 transition-colors duration-300">
                                    <span class="text-lg sm:text-2xl font-bold font-serif opacity-90">${card.image}</span>
                                </div>
                                <div class="card-back ${getCardBackClass(card)}">
                                    ${getCardBackContent(card)}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                ${isMulti ? `
                    <div class="mt-6 flex gap-4">
                        <button onclick="scorePlayer(1)" class="px-6 py-2 bg-bamboo text-white rounded shadow hover:bg-green-700 transition flex items-center gap-2">
                            <span>âœ…</span> èƒŒè¯µæ­£ç¡® (+1)
                        </button>
                        <button onclick="nextTurn()" class="px-6 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition">
                            è·³è¿‡ / æœªèƒŒå‡º
                        </button>
                    </div>
                    <p class="text-xs text-gray-400 mt-2">ç‚¹å‡»å¡ç‰‡åï¼Œè¯·å¯¹æ‰‹åˆ¤æ–­èƒŒè¯µæ˜¯å¦æ­£ç¡®ã€‚</p>
                ` : ''}
            `;
        }

        function getCardBackClass(card) {
            if (card.state === 'trap') return 'bg-gray-800 text-white border-2 border-black ink-reveal';
            if (card.state === 'safe') return 'bg-[#f0f9eb] text-[#3c763d] border border-[#d6e9c6]';
            return 'bg-white';
        }

        function getCardBackContent(card) {
            if (card.state === 'trap') {
                return `
                    <div class="text-4xl mb-2 animate-bounce">ğŸ–Œï¸</div>
                    <div class="font-bold text-lg">å¢¨æ¸!</div>
                `;
            }
            // For single player, add a Detail button
            const detailBtn = (gameState.mode === 'single') 
                ? `<button onclick="showCardDetail(${card.id}); event.stopPropagation();" class="mt-1 text-[8px] bg-indigo/10 text-indigo px-1 rounded border border-indigo/20 hover:bg-indigo hover:text-white transition">èµæ</button>` 
                : '';

            return `
                <div class="flex flex-col items-center justify-center h-full w-full">
                    <div class="text-[10px] sm:text-sm font-bold mb-1 leading-snug px-1 select-text">${card.verse}</div>
                    <div class="text-[9px] text-gray-500 scale-90">${card.source}</div>
                    ${detailBtn}
                </div>
            `;
        }

        function showCardDetail(id) {
            const card = gameState.cards.find(c => c.id === id);
            if (!card) return;
            
            showModal(`
                <div class="text-center">
                    <div class="w-16 h-16 mx-auto bg-indigo/10 rounded-full flex items-center justify-center text-2xl text-indigo font-bold mb-4 border border-indigo/20">
                        ${card.image}
                    </div>
                    <h3 class="text-xl font-bold mb-2">${card.source}</h3>
                    <p class="text-lg font-serif mb-6 text-gray-800">"${card.verse}"</p>
                    
                    <div class="bg-paper p-4 text-left text-sm text-gray-600 rounded border border-gray-200 leading-relaxed">
                        <span class="font-bold text-cinnabar">ã€æ„è±¡èµæã€‘</span><br>
                        æ­¤è¯—å¥ä¸­â€œ<span class="font-bold text-black">${card.image}</span>â€æ„è±¡ï¼Œå¸¸å¯„æ‰˜è¯—äººç‰¹å®šæƒ…æ„Ÿã€‚
                        åœ¨å¤è¯—è¯ä¸­ï¼Œå®ƒå¾€å¾€ä¸ä»…æ˜¯çœ¼å‰ä¹‹æ™¯ï¼Œæ›´æ˜¯å¿ƒä¸­ä¹‹æƒ…ã€‚
                        <br><br>
                        <span class="font-bold text-indigo">ã€å­¦ä¹ ç¬”è®°ã€‘</span><br>
                        å»ºè®®å¤§å£°æœ—è¯»ä¸‰éï¼Œä½“ä¼šéŸ³å¾‹ä¹‹ç¾ã€‚
                    </div>

                    <div class="mt-6">
                        <button onclick="closeModal()" class="px-6 py-2 bg-indigo text-white rounded hover:bg-indigo-700">å…³é—­</button>
                    </div>
                </div>
            `);
        }

        // --- Game Logic ---

        function handleCardClick(id) {
            // Redirect for Match Mode
            if (gameState.mode === 'match') {
                handleMatchClick(id);
                return;
            }

            const card = gameState.cards.find(c => c.id === id);
            if (card.isFlipped) return; 

            // Play Flip Sound
            AudioSys.playFlip();

            // Update state
            card.isFlipped = true;

            // Single Player: Always Safe
            if (gameState.mode === 'single') {
                card.state = 'safe';
                gameState.history.push(card);
                
                renderGrid();
                
                // End game check for single
                const allFlipped = gameState.cards.every(c => c.isFlipped);
                if (allFlipped) {
                    AudioSys.playWin();
                    setTimeout(() => endGameSingle(true), 800);
                }
            } 
            // Multiplayer (Local & Fei Hua): Traps Active
            else {
                const opponent = gameState.turn === 'A' ? 'B' : 'A';
                
                // Check if opponent's trap
                if (gameState.trapsSet[opponent] && gameState.trapsSet[opponent].includes(card.id)) {
                    card.state = 'trap';
                    AudioSys.playInk(); // Play Ink Sound
                    renderGrid();
                    setTimeout(() => endGameMulti(false), 1200); // Delay for animation
                    return;
                }

                // Safe
                card.state = 'safe'; 
                renderGrid();
            }
        }

        function scorePlayer(points) {
            if (!['local', 'feihua'].includes(gameState.mode)) return;
            gameState.scores[gameState.turn] += points;
            nextTurn();
        }

        function nextTurn() {
            if (!['local', 'feihua'].includes(gameState.mode)) return;
            
            // Check termination conditions
            const flippedCount = gameState.cards.filter(c => c.isFlipped).length;
            let isGameOver = false;

            if (gameState.mode === 'local') {
                // Should trap mode end if board full? Rare, but yes.
                // Or usually ends by trap.
                if (flippedCount >= gameState.cards.length) isGameOver = true;
            } else if (gameState.mode === 'feihua') {
                if (flippedCount >= gameState.cards.length) isGameOver = true;
            }

            if (isGameOver) {
                AudioSys.playWin();
                endGameMulti(true);
                return;
            }

            gameState.turn = gameState.turn === 'A' ? 'B' : 'A';
            renderGrid();
        }

        // --- End Game Handling ---

        function endGameSingle(complete) {
            // Gamification: Add XP and Stamp
            const xpGain = gameState.gridSize * 10;
            UserSys.addXP(xpGain);
            UserSys.addStamp('å‹¤å­¦');

            let content = `
                <div class="text-center relative">
                    <div class="absolute top-0 right-0 stamp-seal">å‹¤å­¦</div>
                    <h2 class="text-3xl font-bold text-cinnabar mb-2">åŠŸå¾·åœ†æ»¡</h2>
                    <p class="mb-1 text-sm text-gray-500">æ‚¨å·²é‰´èµå®Œæ‰€æœ‰å¡ç‰‡</p>
                    <p class="mb-4 text-xs font-bold text-gold">+${xpGain} å­¦è¯†å€¼</p>
                </div>
            `;

            content += `<h3 class="font-bold text-lg border-b border-gray-300 pb-2 mb-4 mt-6">æœ¬å±€è¯—è¯å¯¼å›¾</h3>`;
            content += `<div class="grid grid-cols-1 gap-3 max-h-[50vh] overflow-y-auto pr-2">`;
            
            if (gameState.history.length === 0) content += `<p class="text-gray-400">æš‚æ— æ”¶é›†ã€‚</p>`;

            gameState.history.forEach((item, i) => {
                content += `
                    <div class="flex items-center bg-white border border-gray-100 rounded-lg p-3 w-full text-left shadow-sm hover:shadow-md transition" style="animation: fadeIn 0.4s ease backwards ${i*0.05}s">
                        <div class="w-10 h-10 rounded-full bg-indigo/10 text-indigo flex items-center justify-center font-bold mr-3 shrink-0 border border-indigo/20">
                            ${item.image}
                        </div>
                        <div>
                            <p class="text-sm font-bold text-gray-800">${item.verse}</p>
                            <p class="text-[10px] text-gray-500 mt-1">${item.source}</p>
                        </div>
                        <button onclick="showCardDetail(${item.id})" class="ml-auto text-xs text-indigo underline opacity-50 hover:opacity-100">èµæ</button>
                    </div>
                `;
            });
            content += `</div>`;
            content += `<style>@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }</style>`;
            
            content += `
                <div class="mt-8 text-center flex justify-center gap-4 border-t pt-4">
                     <button onclick="closeModal(); initSinglePlayerSetup();" class="px-6 py-2 border border-indigo text-indigo rounded hover:bg-indigo hover:text-white transition">å†æ¥ä¸€å±€</button>
                     <button onclick="closeModal(); renderHome();" class="px-6 py-2 bg-indigo text-white rounded hover:bg-indigo-700 transition">è¿”å›é¦–é¡µ</button>
                </div>
            `;

            showModal(content);
        }

        function endGameMulti(byScoreCheck) {
            const winner = gameState.scores.A > gameState.scores.B ? 'A' : (gameState.scores.B > gameState.scores.A ? 'B' : 'Tie');
            
            // Add XP for playing multiplayer
            UserSys.addXP(20);
            
            let title = "é›…é›†ç»“æŸ";
            let resultText = "";
            let colorClass = "text-gray-800";
            
            if (winner === 'Tie') {
                resultText = "å¹³å±€ï¼åŒæ–¹åŠ¿å‡åŠ›æ•Œã€‚";
            } else {
                const winnerName = winner === 'A' ? 'ç©å®¶ A' : 'ç©å®¶ B';
                colorClass = winner === 'A' ? 'border-cinnabar' : 'border-indigo';
                const bgClass = winner === 'A' ? 'bg-red-50' : 'bg-blue-50';
                
                const randomReward = rewards[Math.floor(Math.random() * rewards.length)];
                
                resultText = `
                    <div class="border-4 ${colorClass} ${bgClass} p-6 rounded-lg mb-6 shadow-inner">
                        <h3 class="text-2xl font-bold mb-2">è·èƒœè€…ï¼š${winnerName}</h3>
                        <p class="text-lg mb-4">æœ€ç»ˆå¾—åˆ†ï¼š${gameState.scores[winner]}</p>
                        
                        <div class="bg-white/60 p-4 rounded border border-gray-200">
                             <p class="text-xs font-bold text-gray-500 mb-2 uppercase tracking-wide">å‘½è¿å¡ç‰Œ</p>
                             <p class="text-xl font-bold text-ink">${randomReward}</p>
                        </div>
                    </div>
                    <div class="flex justify-center gap-8 text-sm text-gray-500 font-mono">
                        <div class="p-2 bg-gray-100 rounded">A: ${gameState.scores.A}</div>
                        <div class="p-2 bg-gray-100 rounded">B: ${gameState.scores.B}</div>
                    </div>
                `;
            }

            // Determine correct restart function
            let restartAction = "";
            if (gameState.mode === 'local') {
                restartAction = "startMultiplayerSetupPhase('local')";
            } else {
                restartAction = "startMultiplayerSetupPhase('feihua')";
            }

            showModal(`
                <div class="text-center">
                    <h2 class="text-3xl font-bold mb-6 tracking-widest text-ink">${title}</h2>
                    ${resultText}
                    <div class="mt-8 flex justify-center gap-4">
                         <button onclick="closeModal(); ${restartAction};" class="px-6 py-2 border border-gray-800 text-gray-800 rounded hover:bg-gray-100 transition">å†æ¥ä¸€å±€</button>
                         <button onclick="closeModal(); renderHome();" class="px-6 py-2 bg-gray-800 text-white rounded hover:bg-black transition">è¿”å›é¦–é¡µ</button>
                    </div>
                </div>
            `);
        }

        // --- Utilities ---

        function showModal(html) {
            modalContent.innerHTML = html;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            // Trigger reflow for transition
            void modal.offsetWidth;
            modal.firstElementChild.classList.remove('scale-95', 'opacity-0');
            modal.firstElementChild.classList.add('scale-100', 'opacity-100');
        }

        function closeModal() {
            modal.firstElementChild.classList.remove('scale-100', 'opacity-100');
            modal.firstElementChild.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }, 200);
        }

        closeModalBtn.addEventListener('click', closeModal);

        // --- Init ---
        renderHome();

    </script>
</body>
</html>
